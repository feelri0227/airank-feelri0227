<!DOCTYPE html>
<html lang="ko" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AIrank â€” AI ë„êµ¬ íŠ¸ë Œë“œ ë­í‚¹</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
[data-theme="dark"] {
  --bg: #090b10;
  --surface: #0f1219;
  --surface2: #151922;
  --surface3: #1c2230;
  --surface4: #222a3a;
  --border: rgba(255,255,255,0.07);
  --border-hover: rgba(255,255,255,0.16);
  --text: #e8ecf3;
  --text-muted: #5a6478;
  --text-dim: #8492a6;
  --accent: #00e5ff;
  --accent2: #7c3aed;
  --accent3: #f97316;
  --green: #22c55e;
  --red: #ef4444;
  --yellow: #fbbf24;
  --header-bg: rgba(9,11,16,0.85);
  --noise-op: 0.38;
  --blob-op: 0.12;
  --bar-bg: rgba(255,255,255,0.06);
  --shadow: 0 20px 60px rgba(0,0,0,0.55);
  --shadow-modal: 0 32px 80px rgba(0,0,0,0.7);
  --tag-cat-bg: rgba(124,58,237,0.15); --tag-cat-c: #a78bfa; --tag-cat-b: rgba(124,58,237,0.25);
  --life-bg: rgba(251,191,36,0.1); --life-c: #fbbf24; --life-b: rgba(251,191,36,0.22);
  --ticker-bg: rgba(0,229,255,0.04);
  --ticker-border: rgba(0,229,255,0.12);
  --modal-overlay: rgba(0,0,0,0.75);
  --compare-bar-bg: rgba(15,18,25,0.95);
}
[data-theme="light"] {
  --bg: #f1f4fb;
  --surface: #ffffff;
  --surface2: #e8edf8;
  --surface3: #dde3f0;
  --surface4: #cdd5e8;
  --border: rgba(0,0,0,0.09);
  --border-hover: rgba(0,0,0,0.2);
  --text: #0f172a;
  --text-muted: #94a3b8;
  --text-dim: #475569;
  --accent: #0284c7;
  --accent2: #7c3aed;
  --accent3: #ea580c;
  --green: #16a34a;
  --red: #dc2626;
  --yellow: #d97706;
  --header-bg: rgba(241,244,251,0.9);
  --noise-op: 0.07;
  --blob-op: 0.055;
  --bar-bg: rgba(0,0,0,0.07);
  --shadow: 0 4px 28px rgba(0,0,0,0.09);
  --shadow-modal: 0 32px 80px rgba(0,0,0,0.22);
  --tag-cat-bg: rgba(124,58,237,0.08); --tag-cat-c: #6d28d9; --tag-cat-b: rgba(124,58,237,0.18);
  --life-bg: rgba(217,119,6,0.08); --life-c: #92400e; --life-b: rgba(217,119,6,0.22);
  --ticker-bg: rgba(2,132,199,0.04);
  --ticker-border: rgba(2,132,199,0.15);
  --modal-overlay: rgba(15,23,42,0.6);
  --compare-bar-bg: rgba(255,255,255,0.97);
}

html { transition: background .35s; }
body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg); color: var(--text);
  min-height: 100vh; overflow-x: hidden;
  transition: background .35s, color .35s;
}
body::before {
  content:''; position:fixed; inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
  pointer-events:none; z-index:0; opacity:var(--noise-op); transition:opacity .35s;
}
.blob { position:fixed; border-radius:50%; filter:blur(130px); pointer-events:none; z-index:0; opacity:var(--blob-op); transition:opacity .35s; }
.blob-1 { width:520px; height:520px; background:var(--accent2); top:-150px; right:-120px; }
.blob-2 { width:420px; height:420px; background:var(--accent); bottom:-120px; left:-120px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
header {
  position:sticky; top:0; z-index:200;
  padding:0 2rem;
  display:flex; align-items:center; justify-content:space-between;
  height:64px;
  border-bottom:1px solid var(--border);
  backdrop-filter:blur(18px);
  background:var(--header-bg);
  transition:background .35s, border-color .35s;
}
.logo { font-family:'Syne',sans-serif; font-weight:800; font-size:1.4rem; letter-spacing:-.03em; color:var(--text); display:flex; align-items:center; gap:.45rem; }
.logo span { color:var(--accent); }
.logo-dot { width:8px; height:8px; background:var(--accent); border-radius:50%; animation:blink 2s infinite; }
@keyframes blink { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.4;transform:scale(.75)} }

.header-right { display:flex; align-items:center; gap:.7rem; }
.live-badge { display:flex; align-items:center; gap:6px; font-size:.72rem; font-weight:500; color:var(--green); background:rgba(34,197,94,.08); border:1px solid rgba(34,197,94,.2); padding:4px 12px; border-radius:100px; }
.live-dot { width:6px; height:6px; background:var(--green); border-radius:50%; animation:blink 1.4s infinite; }
.beta-tag { font-size:.67rem; font-weight:600; letter-spacing:.13em; text-transform:uppercase; color:var(--text-muted); background:var(--surface2); border:1px solid var(--border); padding:4px 11px; border-radius:100px; transition:background .35s, border-color .35s; }

.toggle-wrap { display:flex; align-items:center; gap:7px; }
.theme-label { font-size:.7rem; color:var(--text-muted); white-space:nowrap; transition:color .35s; }
.theme-toggle { position:relative; width:52px; height:28px; background:var(--surface3); border:1px solid var(--border); border-radius:100px; cursor:pointer; transition:background .3s, border-color .3s; flex-shrink:0; }
.theme-toggle:hover { border-color:var(--border-hover); }
.toggle-thumb { position:absolute; top:3px; left:3px; width:20px; height:20px; background:var(--accent); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:11px; box-shadow:0 2px 8px rgba(0,0,0,.25); transition:transform .3s cubic-bezier(.34,1.56,.64,1); }
[data-theme="light"] .toggle-thumb { transform:translateX(24px); }
.icon-dark { display:block; } .icon-light { display:none; }
[data-theme="light"] .icon-dark { display:none; } [data-theme="light"] .icon-light { display:block; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   1. TICKER BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.ticker-wrap {
  position:relative; z-index:150;
  height:34px;
  background:var(--ticker-bg);
  border-bottom:1px solid var(--ticker-border);
  overflow:hidden;
  display:flex; align-items:center;
  transition:background .35s, border-color .35s;
}
.ticker-label {
  flex-shrink:0;
  padding:0 14px 0 16px;
  font-family:'Syne',sans-serif;
  font-size:.63rem; font-weight:700;
  letter-spacing:.14em; text-transform:uppercase;
  color:var(--accent);
  border-right:1px solid var(--ticker-border);
  height:100%; display:flex; align-items:center;
  white-space:nowrap;
  background:var(--ticker-bg);
  z-index:2;
}
.ticker-track-wrap { flex:1; overflow:hidden; position:relative; height:100%; }
/* left & right fade */
.ticker-track-wrap::before,
.ticker-track-wrap::after {
  content:''; position:absolute; top:0; bottom:0; width:48px; z-index:3; pointer-events:none;
}
.ticker-track-wrap::before { left:0; background:linear-gradient(to right, var(--bg), transparent); }
.ticker-track-wrap::after  { right:0; background:linear-gradient(to left, var(--bg), transparent); }
[data-theme="dark"]  .ticker-track-wrap::before { background:linear-gradient(to right, #090b10ee, transparent); }
[data-theme="dark"]  .ticker-track-wrap::after  { background:linear-gradient(to left,  #090b10ee, transparent); }
[data-theme="light"] .ticker-track-wrap::before { background:linear-gradient(to right, #f1f4fbee, transparent); }
[data-theme="light"] .ticker-track-wrap::after  { background:linear-gradient(to left,  #f1f4fbee, transparent); }

.ticker-track {
  display:flex; align-items:center;
  height:100%;
  animation:ticker-scroll 38s linear infinite;
  white-space:nowrap;
  will-change:transform;
}
.ticker-track:hover { animation-play-state:paused; }
@keyframes ticker-scroll { 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }
.ticker-item {
  display:inline-flex; align-items:center; gap:7px;
  padding:0 28px;
  font-size:.72rem; font-weight:400;
  color:var(--text-dim);
  white-space:nowrap;
}
.ticker-item .ti-icon { font-size:.8rem; }
.ticker-item .ti-hot  { color:var(--accent3); font-weight:600; }
.ticker-item .ti-new  { color:var(--green);   font-weight:600; }
.ticker-item .ti-up   { color:var(--accent);  font-weight:600; }
.ticker-sep { color:var(--border-hover); padding:0 4px; font-size:.8rem; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero { position:relative; z-index:5; text-align:center; padding:4rem 2rem 2rem; }
.hero-eyebrow { display:inline-flex; align-items:center; gap:8px; font-size:.72rem; letter-spacing:.15em; text-transform:uppercase; color:var(--accent); margin-bottom:1.2rem; font-weight:500; }
.hero-eyebrow::before,.hero-eyebrow::after { content:''; height:1px; width:28px; background:var(--accent); opacity:.4; }
.hero h1 { font-family:'Syne',sans-serif; font-size:clamp(2.1rem,5vw,3.8rem); font-weight:800; line-height:1.06; letter-spacing:-.04em; margin-bottom:.9rem; color:var(--text); }
.hero h1 em { font-style:normal; background:linear-gradient(135deg,var(--accent),var(--accent2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
.hero p { color:var(--text-dim); font-size:1rem; font-weight:300; max-width:480px; margin:0 auto 1.8rem; line-height:1.65; }

/* â”€â”€ 2. WIZARD TRIGGER BUTTON â”€â”€ */
.wizard-btn-wrap { display:flex; justify-content:center; margin-bottom:.5rem; }
.wizard-btn {
  display:inline-flex; align-items:center; gap:10px;
  font-family:'Syne',sans-serif; font-size:.9rem; font-weight:700;
  letter-spacing:-.01em;
  color:#000;
  background:linear-gradient(135deg, var(--accent), var(--accent2));
  border:none; border-radius:100px; padding:12px 28px;
  cursor:pointer;
  box-shadow:0 0 32px rgba(0,229,255,.25), 0 4px 16px rgba(0,0,0,.3);
  transition:all .25s cubic-bezier(.34,1.56,.64,1);
  position:relative; overflow:hidden;
}
[data-theme="light"] .wizard-btn { color:#fff; }
.wizard-btn::before { content:''; position:absolute; inset:0; background:linear-gradient(135deg,rgba(255,255,255,.15),transparent); }
.wizard-btn:hover { transform:translateY(-2px) scale(1.03); box-shadow:0 0 48px rgba(0,229,255,.35), 0 8px 24px rgba(0,0,0,.35); }
.wizard-btn .wb-icon { font-size:1.1rem; }
.wizard-btn .wb-arrow { font-size:.75rem; opacity:.7; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATS BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.score-info-bar { position:relative; z-index:5; display:flex; align-items:center; justify-content:center; gap:0; padding:.95rem 2rem; border-top:1px solid var(--border); border-bottom:1px solid var(--border); background:rgba(128,128,128,.025); flex-wrap:wrap; row-gap:.7rem; transition:border-color .35s; }
.score-info-label { font-size:.6rem; font-weight:600; letter-spacing:.14em; text-transform:uppercase; color:var(--text-muted); padding-right:1.6rem; border-right:1px solid var(--border); margin-right:1.6rem; white-space:nowrap; line-height:1; }
.score-formula { display:flex; align-items:stretch; }
.score-formula-item { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:3px; padding:0 1.4rem; border-right:1px solid var(--border); }
.score-formula-item:last-child { border-right:none; }
.sfi-top { display:flex; align-items:baseline; gap:.3rem; }
.sfi-platform { font-family:'Syne',sans-serif; font-size:.72rem; font-weight:700; letter-spacing:.02em; }
.sfi-platform.reddit  { color:#ff5700; }
.sfi-platform.youtube { color:#ff0000; }
.sfi-platform.github  { color:#22c55e; }
.sfi-platform.xtwit   { color:var(--text-dim); }
.sfi-weight { font-family:'Syne',sans-serif; font-size:.95rem; font-weight:800; color:var(--text); }
.sfi-desc { font-size:.58rem; color:var(--text-muted); white-space:nowrap; letter-spacing:.02em; }
.score-info-meta { font-size:.59rem; color:var(--text-muted); padding-left:1.6rem; border-left:1px solid var(--border); margin-left:1.6rem; white-space:nowrap; line-height:1.7; letter-spacing:.01em; }

/* FILTERS */
.filters-wrap { position:relative; z-index:5; max-width:1200px; margin:0 auto; padding:2rem 2rem 0; }
.filter-group { margin-bottom:1rem; }
.filter-group-label { font-size:.63rem; font-weight:700; text-transform:uppercase; letter-spacing:.15em; color:var(--text-muted); margin-bottom:.55rem; display:flex; align-items:center; gap:8px; }
.filter-group-label::after { content:''; flex:1; height:1px; background:var(--border); }
.filter-row { display:flex; flex-wrap:wrap; gap:.42rem; }
.filter-btn { cursor:pointer; background:var(--surface2); color:var(--text-dim); border:1px solid var(--border); padding:6px 15px; border-radius:100px; font-size:.79rem; font-family:inherit; font-weight:400; transition:all .2s; }
.filter-btn:hover { border-color:var(--border-hover); color:var(--text); }
.filter-btn.active { background:var(--accent); color:#fff; border-color:var(--accent); font-weight:500; }
.filter-btn.life.active { background:var(--accent3); border-color:var(--accent3); color:#fff; }

/* CONTROLS */
.controls-row { position:relative; z-index:5; display:flex; align-items:center; justify-content:space-between; gap:1rem; max-width:1200px; margin:1.4rem auto 0; padding:0 2rem; flex-wrap:wrap; }
.search-box { position:relative; flex:1; min-width:200px; max-width:300px; }
.search-box input { width:100%; background:var(--surface2); border:1px solid var(--border); color:var(--text); padding:9px 14px 9px 36px; border-radius:8px; font-size:.83rem; font-family:inherit; outline:none; transition:border-color .2s, background .35s; }
.search-box input::placeholder { color:var(--text-muted); }
.search-box input:focus { border-color:rgba(0,180,220,.38); }
.search-icon { position:absolute; left:11px; top:50%; transform:translateY(-50%); color:var(--text-muted); font-size:13px; }
.sort-row { display:flex; gap:.38rem; align-items:center; }
.sort-label { font-size:.75rem; color:var(--text-muted); }
.sort-btn { cursor:pointer; background:transparent; border:1px solid var(--border); color:var(--text-dim); padding:6px 12px; border-radius:7px; font-size:.75rem; font-family:inherit; transition:all .2s; }
.sort-btn:hover { color:var(--text); border-color:var(--border-hover); }
.sort-btn.active { color:var(--accent); border-color:rgba(0,200,230,.32); background:rgba(0,200,230,.06); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARD GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.grid-wrap { position:relative; z-index:5; max-width:1200px; margin:2rem auto 8rem; padding:0 2rem; display:grid; grid-template-columns:repeat(auto-fill,minmax(308px,1fr)); gap:1.1rem; }

/* CARD */
.card {
  background:var(--surface); border:1px solid var(--border); border-radius:14px;
  padding:1.3rem; display:flex; flex-direction:column; gap:.85rem;
  transition:transform .3s cubic-bezier(.25,.8,.25,1), box-shadow .3s, border-color .3s, background .35s;
  position:relative; overflow:hidden;
  animation:cardIn .45s ease both;
  cursor:pointer;
}
@keyframes cardIn { from{opacity:0;transform:translateY(14px)} to{opacity:1;transform:translateY(0)} }
.card:hover { border-color:rgba(0,180,220,.24); transform:translateY(-4px); box-shadow:var(--shadow), 0 0 0 1px rgba(0,180,220,.08); }
.card::before { content:''; position:absolute; top:0; left:0; right:0; height:1px; background:linear-gradient(90deg,transparent,rgba(0,229,255,.35),transparent); opacity:0; transition:opacity .3s; }
.card:hover::before { opacity:1; }
/* compare selected */
.card.selected {
  border-color:var(--accent) !important;
  box-shadow:0 0 0 2px rgba(0,229,255,.25) !important;
  transform:translateY(-4px) !important;
}
[data-theme="light"] .card.selected { border-color:var(--accent) !important; box-shadow:0 0 0 2px rgba(2,132,199,.2) !important; }

/* 3. COMPARE CHECKBOX */
.compare-check-wrap { display:contents; }
.compare-check {
  display:flex; align-items:center; gap:5px;
  cursor:pointer;
  font-size:.72rem; font-weight:600; color:var(--text-muted);
  background:var(--surface2); border:1px solid var(--border);
  padding:6px 10px; border-radius:7px;
  transition:all .2s; white-space:nowrap;
  user-select:none;
}
.compare-check:hover { border-color:var(--border-hover); color:var(--text); }
.compare-check input[type="checkbox"] { display:none; }
.compare-check .cc-box {
  width:13px; height:13px; border-radius:3px;
  border:1.5px solid var(--border-hover);
  background:transparent;
  display:flex; align-items:center; justify-content:center;
  font-size:8px; color:transparent;
  transition:all .18s;
  flex-shrink:0;
}
.card.selected .compare-check .cc-box { background:var(--accent); border-color:var(--accent); color:#000; }
[data-theme="light"] .card.selected .compare-check .cc-box { color:#fff; }
.card.selected .compare-check { border-color:var(--accent); color:var(--accent); background:rgba(0,229,255,.08); }

.card-life-badges { display:flex; flex-wrap:wrap; gap:4px; margin-bottom:-2px; }
.life-badge { font-size:.6rem; font-weight:600; letter-spacing:.05em; text-transform:uppercase; padding:2px 8px; border-radius:100px; border:1px solid var(--life-b); background:var(--life-bg); color:var(--life-c); white-space:nowrap; transition:background .35s, color .35s, border-color .35s; }

.card-top { display:flex; align-items:flex-start; gap:.85rem; }
.tool-icon { width:46px; height:46px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:1.35rem; flex-shrink:0; border:1px solid var(--border); transition:background .35s, border-color .35s; overflow:hidden; }
.brand-img { width:26px; height:26px; object-fit:contain; display:block; }
.brand-fav { width:30px; height:30px; }
[data-theme="dark"]  .si-dark { filter:invert(1) brightness(1.1); }
[data-theme="light"] .si-dark { filter:none; }
.card-name-row { display:flex; flex-direction:column; gap:2px; min-width:0; flex:1; }
.rank-badge { display:flex; align-items:center; gap:7px; }
.rank-num-text { font-family:'DM Sans',sans-serif; font-size:1.05rem; font-weight:700; letter-spacing:-.03em; color:var(--text-dim); font-variant-numeric:tabular-nums; }
.rank-label-text { font-family:'DM Sans',sans-serif; font-size:.56rem; font-weight:600; letter-spacing:.14em; color:var(--text-muted); text-transform:uppercase; }
.live-pip { font-size:.58rem; font-weight:700; color:var(--green); letter-spacing:.04em; animation:blink 1.4s infinite; }
/* í‹°ì–´ ë°°ì§€ */
.tier-badge { display:inline-flex; align-items:center; font-size:.58rem; font-weight:800; letter-spacing:.12em; padding:2px 8px; border-radius:4px; flex-shrink:0; }
.tier-gold     { background:linear-gradient(135deg,#ffe566,#ffd700,#f0a800); color:#3d2800; }
.tier-platinum { background:linear-gradient(135deg,#e2f0ff,#a8cfe8,#6aaed6); color:#0d2b3e; }
.tier-silver   { background:linear-gradient(135deg,#f2f2f2,#d0d0d0,#a8a8a8); color:#2a2a2a; }
/* TOP 3 ë­í¬ ë²ˆí˜¸ ì»¬ëŸ¬ */
.rank-top-1 .rank-num-text { color:var(--text); font-size:1.1rem; }
.rank-top-2 .rank-num-text { color:var(--text); font-size:1.07rem; }
.rank-top-3 .rank-num-text { color:var(--text); font-size:1.05rem; }
/* TOP 3 ì¹´ë“œ ë³´ë” */
.card-rank-1 { border-color:rgba(255,215,0,.22) !important; }
.card-rank-1:hover { border-color:rgba(255,215,0,.45) !important; box-shadow:var(--shadow), 0 0 0 1px rgba(255,215,0,.15) !important; }
.card-rank-2 { border-color:rgba(192,192,192,.22) !important; }
.card-rank-2:hover { border-color:rgba(192,192,192,.45) !important; }
.card-rank-3 { border-color:rgba(205,127,50,.22) !important; }
.card-rank-3:hover { border-color:rgba(205,127,50,.45) !important; }
.tool-name { font-family:'Syne',sans-serif; font-size:.97rem; font-weight:700; color:var(--text); letter-spacing:-.02em; line-height:1.2; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.score-inline { display:flex; align-items:baseline; gap:.4rem; margin-top:3px; }
.score-num { font-family:'DM Sans',sans-serif; font-size:1.25rem; font-weight:700; line-height:1; letter-spacing:-.02em; }
.score-unit { font-size:.62rem; font-weight:400; color:var(--text-muted); margin-left:1px; }
.score-change { font-size:.67rem; font-weight:500; display:flex; align-items:center; gap:2px; }
.score-change.up { color:var(--green); } .score-change.down { color:var(--red); }

.score-bar-wrap { display:flex; align-items:center; gap:8px; }
.score-bar-bg { flex:1; height:4px; background:var(--bar-bg); border-radius:2px; overflow:hidden; transition:background .35s; }
.score-bar-fill { height:100%; border-radius:2px; }
.score-pct { font-size:.65rem; color:var(--text-muted); min-width:30px; text-align:right; }

.tool-desc { font-size:.82rem; color:var(--text-dim); line-height:1.56; font-weight:300; }
.tags { display:flex; flex-wrap:wrap; gap:.3rem; }
.tag { font-size:.65rem; padding:3px 9px; border-radius:100px; font-weight:500; }
.tag-cat { background:var(--tag-cat-bg); color:var(--tag-cat-c); border:1px solid var(--tag-cat-b); }
.tag-free { background:rgba(34,197,94,.1); color:var(--green); border:1px solid rgba(34,197,94,.22); }
.tag-paid { background:rgba(249,115,22,.1); color:#fb923c; border:1px solid rgba(249,115,22,.22); }
[data-theme="light"] .tag-paid { color:#c2410c; }
.tag-api  { background:rgba(0,200,230,.08); color:var(--accent); border:1px solid rgba(0,200,230,.18); }

.sns-row { display:flex; gap:.65rem; padding-top:.75rem; border-top:1px solid var(--border); transition:border-color .35s; }
.sns-item { display:flex; flex-direction:column; align-items:center; gap:3px; flex:1; }
.sns-platform { font-size:.58rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:.08em; }
.sns-val { font-family:'Syne',sans-serif; font-size:.83rem; font-weight:700; color:var(--text); }
.sns-bar { width:100%; height:3px; border-radius:2px; background:var(--bar-bg); overflow:hidden; }
.sns-bar-fill { height:100%; border-radius:2px; }
.sns-x      .sns-bar-fill { background:#1d9bf0; }
.sns-reddit .sns-bar-fill { background:#ff4500; }
.sns-yt     .sns-bar-fill { background:#ff0000; }
.sns-github .sns-bar-fill { background:#22c55e; }

.card-action { display:flex; align-items:center; gap:.5rem; }
.card-action .visit-btn { flex:1; justify-content:center; }
.visit-btn { display:inline-flex; align-items:center; gap:5px; font-size:.75rem; font-weight:500; color:var(--accent); background:rgba(0,180,220,.07); border:1px solid rgba(0,180,220,.2); padding:6px 13px; border-radius:7px; cursor:pointer; text-decoration:none; font-family:inherit; transition:all .2s; }
.visit-btn:hover { background:rgba(0,180,220,.15); }
.bookmark-btn { background:none; border:1px solid var(--border); color:var(--text-muted); padding:6px 10px; border-radius:7px; cursor:pointer; font-size:.9rem; transition:all .2s; }
.bookmark-btn:hover { color:var(--accent); border-color:rgba(0,180,220,.28); }
.bookmark-btn.saved { color:var(--accent); border-color:rgba(0,180,220,.32); }

.no-results { grid-column:1/-1; text-align:center; padding:4rem 2rem; color:var(--text-muted); }
.no-results big { display:block; font-size:3rem; margin-bottom:1rem; }

/* LOAD MORE */
.load-more-wrap { display:flex; justify-content:center; padding:1.8rem 2rem 3rem; }
.load-more-btn {
  display:inline-flex; align-items:center; gap:.6rem;
  font-family:'Syne',sans-serif; font-size:.85rem; font-weight:700; letter-spacing:.04em;
  color:var(--text-dim);
  background:var(--surface2); border:1px solid var(--border);
  border-radius:100px; padding:11px 28px;
  cursor:pointer; transition:all .2s;
}
.load-more-btn:hover { border-color:var(--border-hover); color:var(--text); transform:translateY(-1px); box-shadow:var(--shadow); }
.lm-count { font-family:'DM Sans',sans-serif; font-size:.75rem; font-weight:400; background:var(--surface3); color:var(--text-muted); border-radius:100px; padding:2px 9px; }
.lm-arrow { font-size:.8rem; opacity:.5; transition:transform .2s; }
.load-more-btn:hover .lm-arrow { transform:translateY(2px); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   3. COMPARE FLOATING BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.compare-bar {
  position:fixed; bottom:0; left:0; right:0; z-index:300;
  background:var(--compare-bar-bg);
  border-top:1px solid var(--border);
  backdrop-filter:blur(20px);
  padding:12px 2rem;
  display:flex; align-items:center; justify-content:space-between; gap:1rem;
  transform:translateY(100%);
  transition:transform .35s cubic-bezier(.34,1.56,.64,1), background .35s, border-color .35s;
  box-shadow:0 -8px 40px rgba(0,0,0,.3);
}
.compare-bar.visible { transform:translateY(0); }
.compare-bar-left { display:flex; align-items:center; gap:.8rem; flex-wrap:wrap; }
.compare-bar-title { font-family:'Syne',sans-serif; font-size:.85rem; font-weight:700; color:var(--text); }
.compare-pills { display:flex; gap:.5rem; flex-wrap:wrap; }
.compare-pill {
  display:inline-flex; align-items:center; gap:6px;
  font-size:.72rem; font-weight:500;
  background:var(--surface2); border:1px solid var(--border);
  color:var(--text-dim); padding:4px 10px; border-radius:100px;
}
.compare-pill .cp-remove { cursor:pointer; opacity:.6; transition:opacity .15s; font-size:.8rem; line-height:1; }
.compare-pill .cp-remove:hover { opacity:1; }
.compare-bar-right { display:flex; align-items:center; gap:.7rem; flex-shrink:0; }
.compare-clear-btn { background:none; border:1px solid var(--border); color:var(--text-muted); font-size:.75rem; font-family:inherit; padding:7px 14px; border-radius:8px; cursor:pointer; transition:all .2s; }
.compare-clear-btn:hover { border-color:var(--red); color:var(--red); }
.compare-go-btn {
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#000; border:none; font-family:'Syne',sans-serif; font-weight:700; font-size:.85rem;
  padding:9px 22px; border-radius:10px; cursor:pointer;
  box-shadow:0 4px 20px rgba(0,229,255,.25);
  transition:all .2s cubic-bezier(.34,1.56,.64,1);
  white-space:nowrap;
}
[data-theme="light"] .compare-go-btn { color:#fff; }
.compare-go-btn:hover { transform:scale(1.04); box-shadow:0 6px 28px rgba(0,229,255,.35); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modal-overlay {
  position:fixed; inset:0; z-index:400;
  background:var(--modal-overlay);
  backdrop-filter:blur(6px);
  display:flex; align-items:center; justify-content:center;
  padding:1.5rem;
  opacity:0; pointer-events:none;
  transition:opacity .25s;
}
.modal-overlay.open { opacity:1; pointer-events:all; }
.modal {
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:20px;
  width:100%; max-width:620px;
  max-height:88vh; overflow-y:auto;
  box-shadow:var(--shadow-modal);
  transform:scale(.94) translateY(16px);
  transition:transform .3s cubic-bezier(.34,1.3,.64,1), background .35s;
}
.modal-overlay.open .modal { transform:scale(1) translateY(0); }
.modal-header {
  padding:1.4rem 1.6rem 1rem;
  border-bottom:1px solid var(--border);
  display:flex; align-items:flex-start; justify-content:space-between; gap:1rem;
  transition:border-color .35s;
}
.modal-title { font-family:'Syne',sans-serif; font-size:1.1rem; font-weight:800; color:var(--text); letter-spacing:-.02em; }
.modal-sub { font-size:.78rem; color:var(--text-dim); margin-top:3px; font-weight:300; }
.modal-close { background:none; border:1px solid var(--border); color:var(--text-muted); width:32px; height:32px; border-radius:8px; cursor:pointer; font-size:1rem; display:flex; align-items:center; justify-content:center; transition:all .2s; flex-shrink:0; }
.modal-close:hover { border-color:var(--border-hover); color:var(--text); }
.modal-body { padding:1.4rem 1.6rem; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DETAIL MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.detail-hero { display:flex; align-items:flex-start; gap:1.2rem; padding:1.8rem 1.6rem 1.3rem; border-bottom:1px solid var(--border); transition:border-color .35s; }
.detail-icon { width:64px; height:64px; border-radius:16px; display:flex; align-items:center; justify-content:center; font-size:2rem; flex-shrink:0; border:1px solid var(--border); overflow:hidden; transition:background .35s, border-color .35s; }
.detail-name { font-family:'Syne',sans-serif; font-size:1.35rem; font-weight:800; color:var(--text); letter-spacing:-.02em; line-height:1.2; margin-top:2px; }
.detail-score-row { display:flex; align-items:baseline; gap:.5rem; margin-top:5px; }
.detail-score-num { font-family:'DM Sans',sans-serif; font-size:1.9rem; font-weight:700; line-height:1; letter-spacing:-.02em; }
.detail-section { padding:1.1rem 1.6rem; border-bottom:1px solid var(--border); transition:border-color .35s; }
.detail-section-title { font-size:.62rem; font-weight:600; letter-spacing:.12em; text-transform:uppercase; color:var(--text-muted); margin-bottom:.9rem; }
.detail-desc { font-size:.875rem; color:var(--text-dim); line-height:1.75; }
.detail-sns-list { display:flex; flex-direction:column; gap:.75rem; }
.detail-sns-row { display:grid; grid-template-columns:100px 1fr 38px; align-items:center; gap:.7rem; }
.detail-sns-label { font-size:.75rem; font-weight:500; color:var(--text-dim); }
.detail-sns-bar-bg { height:6px; background:var(--bar-bg); border-radius:3px; overflow:hidden; }
.detail-sns-bar-fill { height:100%; border-radius:3px; transition:width .6s cubic-bezier(.25,.8,.25,1); }
.detail-sns-val { font-size:.8rem; font-weight:700; text-align:right; }
.detail-tags-wrap { display:flex; flex-wrap:wrap; gap:.4rem; }
.detail-life-wrap { display:flex; flex-wrap:wrap; gap:.4rem; }
.detail-footer { padding:1.2rem 1.6rem; display:flex; gap:.65rem; }
.detail-visit-btn { flex:1; display:flex; align-items:center; justify-content:center; gap:.45rem; padding:.8rem 1rem; border-radius:10px; background:var(--accent); color:#000; font-weight:700; font-size:.85rem; text-decoration:none; transition:opacity .2s; font-family:inherit; }
.detail-visit-btn:hover { opacity:.85; }
.detail-cmp-btn { padding:.8rem 1.1rem; border-radius:10px; border:1px solid var(--border); color:var(--text-dim); font-size:.82rem; cursor:pointer; background:none; font-family:inherit; font-weight:500; transition:all .2s; white-space:nowrap; }
.detail-cmp-btn:hover { border-color:var(--border-hover); color:var(--text); }
.detail-cmp-btn.active { border-color:var(--accent); color:var(--accent); background:rgba(0,229,255,.08); }
.detail-close-btn { position:absolute; top:.9rem; right:.9rem; z-index:2; background:var(--surface2); border:1px solid var(--border); color:var(--text-muted); width:32px; height:32px; border-radius:8px; cursor:pointer; font-size:1rem; display:flex; align-items:center; justify-content:center; transition:all .2s; }
.detail-close-btn:hover { border-color:var(--border-hover); color:var(--text); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   2. WIZARD MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.wizard-steps { display:flex; gap:.5rem; margin-bottom:1.6rem; }
.wizard-step-dot {
  height:4px; flex:1; border-radius:2px;
  background:var(--surface3);
  transition:background .3s;
}
.wizard-step-dot.done { background:var(--accent); }

.wizard-q { font-family:'Syne',sans-serif; font-size:.95rem; font-weight:700; color:var(--text); margin-bottom:1rem; letter-spacing:-.01em; }
.wizard-opts { display:grid; grid-template-columns:1fr 1fr; gap:.6rem; }
.wopt {
  cursor:pointer; background:var(--surface2); border:1.5px solid var(--border);
  border-radius:12px; padding:.85rem 1rem;
  display:flex; align-items:center; gap:.75rem;
  transition:all .2s;
  user-select:none;
}
.wopt:hover { border-color:var(--border-hover); color:var(--text); background:var(--surface3); }
.wopt.selected { border-color:var(--accent); background:rgba(0,229,255,.08); }
[data-theme="light"] .wopt.selected { background:rgba(2,132,199,.07); }
.wopt-icon { font-size:1.3rem; flex-shrink:0; }
.wopt-text { display:flex; flex-direction:column; gap:1px; }
.wopt-label { font-size:.82rem; font-weight:600; color:var(--text); }
.wopt-sub { font-size:.68rem; color:var(--text-muted); font-weight:300; }

.wizard-nav { display:flex; justify-content:flex-end; gap:.6rem; margin-top:1.4rem; }
.wbtn { font-family:inherit; font-size:.82rem; font-weight:500; padding:8px 18px; border-radius:9px; cursor:pointer; transition:all .2s; border:1px solid var(--border); background:var(--surface2); color:var(--text-dim); }
.wbtn:hover { color:var(--text); border-color:var(--border-hover); }
.wbtn.primary { background:var(--accent); color:#000; border-color:var(--accent); font-weight:700; }
[data-theme="light"] .wbtn.primary { color:#fff; }
.wbtn.primary:hover { box-shadow:0 4px 16px rgba(0,229,255,.3); }
.wbtn:disabled { opacity:.35; cursor:not-allowed; }

/* wizard results */
.wizard-results-title { font-family:'Syne',sans-serif; font-size:.85rem; font-weight:700; color:var(--text-dim); margin-bottom:.9rem; text-transform:uppercase; letter-spacing:.08em; }
.wizard-result-card {
  display:flex; align-items:flex-start; gap:.9rem;
  background:var(--surface2); border:1px solid var(--border);
  border-radius:12px; padding:.9rem 1rem;
  margin-bottom:.6rem;
  transition:border-color .2s, background .35s;
}
.wizard-result-card:hover { border-color:rgba(0,180,220,.2); }
.wrc-icon { font-size:1.5rem; flex-shrink:0; }
.wrc-body { flex:1; min-width:0; }
.wrc-name { font-family:'Syne',sans-serif; font-size:.9rem; font-weight:700; color:var(--text); }
.wrc-desc { font-size:.75rem; color:var(--text-dim); margin-top:3px; font-weight:300; line-height:1.5; }
.wrc-score { text-align:right; flex-shrink:0; }
.wrc-score-num { font-family:'Syne',sans-serif; font-size:1.2rem; font-weight:800; }
.wrc-score-label { font-size:.6rem; color:var(--text-muted); display:block; text-transform:uppercase; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   3. COMPARE MODAL TABLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.compare-table-wrap { overflow-x:auto; border-radius:10px; border:1px solid var(--border); }
.compare-table {
  width:100%; border-collapse:collapse;
  font-size:.82rem;
}
.compare-table th, .compare-table td {
  padding:.7rem 1rem;
  text-align:left;
  border-bottom:1px solid var(--border);
  transition:background .35s, border-color .35s;
}
.compare-table th {
  font-family:'Syne',sans-serif; font-weight:700; font-size:.72rem;
  text-transform:uppercase; letter-spacing:.1em;
  color:var(--text-muted); background:var(--surface2);
  white-space:nowrap;
}
.compare-table td { color:var(--text-dim); }
.compare-table tr:last-child td { border-bottom:none; }
.compare-table tr:last-child th { border-bottom:none; }
.compare-table .ct-tool-name { font-family:'Syne',sans-serif; font-weight:700; color:var(--text); font-size:.85rem; white-space:nowrap; }
.compare-table .ct-score { font-family:'Syne',sans-serif; font-weight:800; font-size:1rem; }
.compare-table .ct-bar-cell { min-width:120px; }
.ct-mini-bar { height:6px; border-radius:3px; background:var(--bar-bg); overflow:hidden; margin-top:4px; }
.ct-mini-bar-fill { height:100%; border-radius:3px; }
.compare-table .ct-tag { display:inline-block; font-size:.62rem; padding:2px 7px; border-radius:100px; font-weight:500; margin:1px; }
.compare-winner { background:rgba(0,229,255,.07); }
[data-theme="light"] .compare-winner { background:rgba(2,132,199,.06); }
.winner-badge { font-size:.6rem; font-weight:700; color:var(--accent); background:rgba(0,229,255,.12); border:1px solid rgba(0,229,255,.22); padding:1px 6px; border-radius:4px; margin-left:6px; vertical-align:middle; }

/* FOOTER */
footer { position:relative; z-index:5; border-top:1px solid var(--border); padding:1.8rem 2rem; text-align:center; font-size:.75rem; color:var(--text-muted); transition:border-color .35s; }
footer span { color:var(--accent); }

@media(max-width:640px){
  .score-info-bar{padding:.8rem 1rem}
  .score-info-label{padding-right:1rem;margin-right:1rem}
  .score-info-meta{padding-left:1rem;margin-left:1rem}
  .score-formula-item{padding:0 .9rem}
  .hero h1{font-size:2rem}
  .grid-wrap{grid-template-columns:1fr}
  .theme-label,.beta-tag{display:none}
  .wizard-opts{grid-template-columns:1fr}
  .compare-bar{flex-direction:column;align-items:stretch}
}
</style>
</head>
<body>
<div class="blob blob-1"></div>
<div class="blob blob-2"></div>

<!-- HEADER -->
<header>
  <div class="logo"><div class="logo-dot"></div>AI<span>rank</span></div>
  <div class="header-right">
    <div class="live-badge" id="liveBadge"><div class="live-dot"></div>ì‹¤ì‹œê°„</div>
    <div class="beta-tag">Beta</div>
    <div class="toggle-wrap">
      <span class="theme-label" id="themeLabel">ğŸŒ™ ë‹¤í¬</span>
      <button class="theme-toggle" id="themeToggle" title="í…Œë§ˆ ì „í™˜">
        <div class="toggle-thumb"><span class="icon-dark">ğŸŒ™</span><span class="icon-light">â˜€ï¸</span></div>
      </button>
    </div>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  1. TICKER BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="ticker-wrap">
  <div class="ticker-label">ğŸ“¡ íŠ¸ë Œë“œ</div>
  <div class="ticker-track-wrap">
    <div class="ticker-track" id="tickerTrack"></div>
  </div>
</div>

<!-- HERO -->
<div class="hero">
  <div class="hero-eyebrow">SNS íŠ¸ë Œë“œ ê¸°ë°˜ AI ë„êµ¬ ë­í‚¹</div>
  <h1>AI ë„êµ¬ë¥¼<br><em>ì§„ì§œ ì¸ê¸°</em>ë¡œ í‰ê°€í•˜ë‹¤</h1>
  <p>X, Reddit, YouTube, GitHub ë°ì´í„°ë¥¼ ì¢…í•©í•´<br>ì‹¤ì‹œê°„ AI ë„êµ¬ íŠ¸ë Œë“œë¥¼ ë¶„ì„í•©ë‹ˆë‹¤</p>

  <!-- 2. WIZARD BUTTON -->
  <div class="wizard-btn-wrap">
    <button class="wizard-btn" id="openWizardBtn">
      <span class="wb-icon">âœ¨</span>
      ë‚˜ì—ê²Œ ë”± ë§ëŠ” AI ì°¾ê¸°
      <span class="wb-arrow">â†’</span>
    </button>
  </div>
</div>

<!-- SCORE INFO BAR -->
<div class="score-info-bar">
  <div class="score-info-label">ì ìˆ˜ ì‚°ì • ë°©ì‹</div>
  <div class="score-formula">
    <div class="score-formula-item">
      <div class="sfi-top">
        <span class="sfi-platform reddit">Reddit</span>
        <span class="sfi-weight">30%</span>
      </div>
      <div class="sfi-desc">ì›”ê°„ ì—…ë³´íŠ¸</div>
    </div>
    <div class="score-formula-item">
      <div class="sfi-top">
        <span class="sfi-platform youtube">YouTube</span>
        <span class="sfi-weight">30%</span>
      </div>
      <div class="sfi-desc">ê²€ìƒ‰ ì˜ìƒ ìˆ˜</div>
    </div>
    <div class="score-formula-item">
      <div class="sfi-top">
        <span class="sfi-platform github">GitHub</span>
        <span class="sfi-weight">25%</span>
      </div>
      <div class="sfi-desc">ì—°ê´€ ì €ì¥ì†Œ</div>
    </div>
    <div class="score-formula-item">
      <div class="sfi-top">
        <span class="sfi-platform xtwit">X</span>
        <span class="sfi-weight">15%</span>
      </div>
      <div class="sfi-desc">íŠ¸ë Œë“œ ì§€ìˆ˜</div>
    </div>
  </div>
  <div class="score-info-meta">4h ì—…ë°ì´íŠ¸<br>ë¡œê·¸ ì •ê·œí™”</div>
</div>

<!-- FILTERS -->
<div class="filters-wrap">
  <div class="filter-group">
    <div class="filter-group-label">ğŸ¯ ìœ í˜•ë³„</div>
    <div class="filter-row" id="filterRowType">
      <button class="filter-btn active" data-cat="all">ğŸ”¥ ì „ì²´</button>
      <button class="filter-btn" data-cat="text">âœï¸ í…ìŠ¤íŠ¸/ê¸€ì“°ê¸°</button>
      <button class="filter-btn" data-cat="image">ğŸ¨ ì´ë¯¸ì§€ ìƒì„±</button>
      <button class="filter-btn" data-cat="code">ğŸ’» ì½”ë”©</button>
      <button class="filter-btn" data-cat="video">ğŸ¬ ì˜ìƒ</button>
      <button class="filter-btn" data-cat="audio">ğŸµ ì˜¤ë””ì˜¤</button>
      <button class="filter-btn" data-cat="search">ğŸ” ê²€ìƒ‰/ë¦¬ì„œì¹˜</button>
      <button class="filter-btn" data-cat="productivity">âš¡ ìƒì‚°ì„±</button>
      <button class="filter-btn" data-cat="design">ğŸ–Œï¸ ë””ìì¸</button>
      <button class="filter-btn" data-cat="data">ğŸ“Š ë°ì´í„°/ë¶„ì„</button>
    </div>
  </div>
  <div class="filter-group">
    <div class="filter-group-label">ğŸ‘¤ ëŒ€ìƒë³„</div>
    <div class="filter-row" id="filterRowLife">
      <button class="filter-btn life" data-life="all">ì „ì²´ ëŒ€ìƒ</button>
      <button class="filter-btn life" data-life="office">ğŸ’¼ ì§ì¥ì¸ í•„ìˆ˜</button>
      <button class="filter-btn life" data-life="freelancer">ğŸ–¥ï¸ í”„ë¦¬ëœì„œ í•„ìˆ˜</button>
      <button class="filter-btn life" data-life="student">ğŸ“ ëŒ€í•™ìƒ í•„ìˆ˜</button>
      <button class="filter-btn life" data-life="creator">ğŸ¥ í¬ë¦¬ì—ì´í„° í•„ìˆ˜</button>
      <button class="filter-btn life" data-life="marketer">ğŸ“£ ë§ˆì¼€í„° í•„ìˆ˜</button>
      <button class="filter-btn life" data-life="startup">ğŸš€ ìŠ¤íƒ€íŠ¸ì—… í•„ìˆ˜</button>
    </div>
  </div>
</div>

<!-- CONTROLS -->
<div class="controls-row">
  <div class="search-box">
    <span class="search-icon">ğŸ”</span>
    <input type="text" id="searchInput" placeholder="ë„êµ¬ ì´ë¦„ ê²€ìƒ‰...">
  </div>
  <div class="sort-row">
    <span class="sort-label">ì •ë ¬:</span>
    <button class="sort-btn active" data-sort="score">SNS ì ìˆ˜</button>
    <button class="sort-btn" data-sort="growth">ì„±ì¥ë¥ </button>
    <button class="sort-btn" data-sort="name">ì´ë¦„ìˆœ</button>
  </div>
</div>

<!-- CARD GRID -->
<div class="grid-wrap" id="cardGrid"></div>

<!-- LOAD MORE -->
<div class="load-more-wrap" id="loadMoreWrap" style="display:none">
  <button class="load-more-btn" id="loadMoreBtn">
    <span id="loadMoreLabel">ë”ë³´ê¸°</span>
    <span class="lm-count" id="loadMoreCount"></span>
    <span class="lm-arrow">â†“</span>
  </button>
</div>

<!-- 3. COMPARE FLOATING BAR -->
<div class="compare-bar" id="compareBar">
  <div class="compare-bar-left">
    <div class="compare-bar-title">ë¹„êµ ì„ íƒë¨</div>
    <div class="compare-pills" id="comparePills"></div>
  </div>
  <div class="compare-bar-right">
    <button class="compare-clear-btn" id="compareClearBtn">ì´ˆê¸°í™”</button>
    <button class="compare-go-btn" id="compareGoBtn">ë¹„êµí•˜ê¸° <span id="compareCount">0</span>ê°œ â†’</button>
  </div>
</div>

<!-- 2. WIZARD MODAL -->
<div class="modal-overlay" id="wizardOverlay">
  <div class="modal" id="wizardModal">
    <div class="modal-header">
      <div>
        <div class="modal-title">âœ¨ AI ë„êµ¬ ì°¾ê¸° ë§ˆë²•ì‚¬</div>
        <div class="modal-sub" id="wizardSubtitle">ì§ì—…êµ°ê³¼ ì£¼ìš” ì‘ì—…ì„ ì„ íƒí•˜ë©´ ë”± ë§ëŠ” AIë¥¼ ì¶”ì²œí•´ë“œë ¤ìš”</div>
      </div>
      <button class="modal-close" id="closeWizardBtn">âœ•</button>
    </div>
    <div class="modal-body" id="wizardBody"></div>
  </div>
</div>

<!-- 3. COMPARE MODAL -->
<div class="modal-overlay" id="compareOverlay">
  <div class="modal" style="max-width:760px" id="compareModal">
    <div class="modal-header">
      <div>
        <div class="modal-title">ğŸ“Š ë„êµ¬ ë¹„êµí•˜ê¸°</div>
        <div class="modal-sub">ì„ íƒí•œ AI ë„êµ¬ë“¤ì˜ SNS íŠ¸ë Œë“œ ì ìˆ˜ë¥¼ ë¹„êµí•©ë‹ˆë‹¤</div>
      </div>
      <button class="modal-close" id="closeCompareBtn">âœ•</button>
    </div>
    <div class="modal-body" id="compareBody"></div>
  </div>
</div>

<!-- DETAIL MODAL -->
<div class="modal-overlay" id="detailOverlay">
  <div class="modal" style="max-width:500px;position:relative" id="detailModal">
    <button class="detail-close-btn" id="closeDetailBtn">âœ•</button>
    <div id="detailBody"></div>
  </div>
</div>

<footer>
  <p>ë°ì´í„° ì¶œì²˜: X Â· Reddit API Â· YouTube Data API Â· GitHub API Â· <span>AIrank</span> ìì²´ ë¶„ì„</p>
  <p style="margin-top:.4rem;">Â© 2026 AIrank. ëª¨ë“  SNS ì ìˆ˜ëŠ” ì°¸ê³ ìš©ì…ë‹ˆë‹¤.</p>
</footer>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TOOLS = [
  {id:1,  cat:'text',       icon:'ğŸ¤–', name:'ChatGPT',          url:'https://chatgpt.com',
   desc:'OpenAIì˜ ëŒ€í™”í˜• AI. ë³´ê³ ì„œ ì‘ì„±, ì´ë©”ì¼ ì´ˆì•ˆ, ë¸Œë ˆì¸ìŠ¤í† ë° ë“± ì¼ìƒ ì—…ë¬´ ì „ë°˜ì— í™œìš©ë˜ëŠ” AIì˜ ëŒ€ëª…ì‚¬.',
   tags:['í…ìŠ¤íŠ¸','ë¬´ë£Œ','API'], score:99, change:+1.2, sns:{x:98,reddit:95,youtube:95,github:70}, free:true,
   life:['office','student','freelancer','marketer','startup','creator']},
  {id:2,  cat:'image',      icon:'ğŸ¨', name:'Midjourney',        url:'https://www.midjourney.com',
   desc:'í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸ë¡œ ì˜í™” ê°™ì€ ì´ë¯¸ì§€ë¥¼ ë§Œë“œëŠ” AI. Discord ê¸°ë°˜, ì•„í‹°ìŠ¤íŠ¸Â·ë””ìì´ë„ˆ í•„ìˆ˜ ë„êµ¬.',
   tags:['ì´ë¯¸ì§€ ìƒì„±','ìœ ë£Œ','Discord'], score:98, change:+2.1, sns:{x:92,reddit:88,youtube:88,github:30}, free:false,
   life:['creator','freelancer','marketer']},
  {id:3,  cat:'code',       icon:'ğŸ’»', name:'GitHub Copilot',    url:'https://github.com/features/copilot',
   desc:'OpenAIì™€ GitHubì´ ë§Œë“  AI ì½”ë”© ì–´ì‹œìŠ¤í„´íŠ¸. ì½”ë“œ ìë™ì™„ì„±ë¶€í„° í•¨ìˆ˜ ìƒì„±ê¹Œì§€ ê°œë°œ ìƒì‚°ì„± ê·¹ëŒ€í™”.',
   tags:['ì½”ë”©','ìœ ë£Œ','API'], score:96, change:+0.8, sns:{x:78,reddit:95,youtube:80,github:98}, free:false,
   life:['office','freelancer','student','startup']},
  {id:4,  cat:'text',       icon:'ğŸ§ ', name:'Claude',            url:'https://claude.ai',
   desc:'Anthropicì˜ AI ì–´ì‹œìŠ¤í„´íŠ¸. ê¸´ ë¬¸ì„œ ìš”ì•½, ì½”ë“œ ì‘ì„±, ì°½ì˜ì  ê¸€ì“°ê¸°ì—ì„œ ë›°ì–´ë‚œ ì„±ëŠ¥. 200K ì»¨í…ìŠ¤íŠ¸.',
   tags:['í…ìŠ¤íŠ¸','ë¬´ë£Œ','API'], score:94, change:+5.3, sns:{x:88,reddit:82,youtube:82,github:65}, free:true,
   life:['office','student','freelancer','startup']},
  {id:5,  cat:'code',       icon:'ğŸ”§', name:'Cursor',            url:'https://www.cursor.com',
   desc:'AIê°€ ë‚´ì¥ëœ ì°¨ì„¸ëŒ€ ì½”ë“œ ì—ë””í„°. ìì—°ì–´ë¡œ ì½”ë”©í•˜ê³  ì½”ë“œë² ì´ìŠ¤ ì „ì²´ë¥¼ AIì™€ ë¦¬íŒ©í† ë§.',
   tags:['ì½”ë”©','ë¬´ë£Œ','ì—ë””í„°'], score:89, change:+8.7, sns:{x:91,reddit:78,youtube:85,github:82}, free:true,
   life:['freelancer','startup','student']},
  {id:6,  cat:'video',      icon:'ğŸ¬', name:'Sora',              url:'https://sora.com',
   desc:'OpenAIì˜ í…ìŠ¤íŠ¸-íˆ¬-ë¹„ë””ì˜¤ AI. í”„ë¡¬í”„íŠ¸ í•˜ë‚˜ë¡œ ì˜í™” ìˆ˜ì¤€ì˜ ê³ í™”ì§ˆ ì˜ìƒì„ ìë™ ìƒì„±í•©ë‹ˆë‹¤.',
   tags:['ì˜ìƒ ìƒì„±','ìœ ë£Œ'], score:87, change:+12.4, sns:{x:95,reddit:70,youtube:90,github:20}, free:false,
   life:['creator','marketer']},
  {id:7,  cat:'search',     icon:'ğŸ”', name:'Perplexity AI',     url:'https://www.perplexity.ai',
   desc:'ì‹¤ì‹œê°„ ì›¹ ê²€ìƒ‰ê³¼ AIë¥¼ ê²°í•©í•œ ì°¨ì„¸ëŒ€ ê²€ìƒ‰ ì—”ì§„. ì¶œì²˜ë¥¼ ëª…ì‹œí•´ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë‹µë³€ì„ ì œê³µí•©ë‹ˆë‹¤.',
   tags:['ê²€ìƒ‰','ë¬´ë£Œ','API'], score:85, change:+3.6, sns:{x:80,reddit:75,youtube:75,github:45}, free:true,
   life:['student','office','startup','freelancer']},
  {id:8,  cat:'audio',      icon:'ğŸµ', name:'Suno AI',           url:'https://suno.com',
   desc:'í…ìŠ¤íŠ¸ë¡œ ì™„ì„±ëœ ìŒì•…ì„ ë§Œë“œëŠ” AI. ì¥ë¥´Â·ë¶„ìœ„ê¸°Â·ê°€ì‚¬ë¥¼ ì…ë ¥í•˜ë©´ ëª‡ ì´ˆ ë§Œì— ë…¸ë˜ ì™„ì„±.',
   tags:['ì˜¤ë””ì˜¤','ë¬´ë£Œ'], score:83, change:+15.2, sns:{x:88,reddit:65,youtube:82,github:15}, free:true,
   life:['creator','freelancer']},
  {id:9,  cat:'productivity',icon:'âš¡', name:'Notion AI',        url:'https://www.notion.com/product/ai',
   desc:'Notionì— í†µí•©ëœ AI. íšŒì˜ë¡ ìš”ì•½, í”„ë¡œì íŠ¸ í”Œëœ ì‘ì„±, ì•¡ì…˜ ì•„ì´í…œ ì¶”ì¶œë¡œ ì—…ë¬´ íš¨ìœ¨ ê·¹ëŒ€í™”.',
   tags:['ìƒì‚°ì„±','ìœ ë£Œ'], score:82, change:+1.0, sns:{x:72,reddit:68,youtube:73,github:30}, free:false,
   life:['office','startup','student']},
  {id:10, cat:'design',     icon:'ğŸ–Œï¸', name:'Canva AI',         url:'https://www.canva.com/ai-image-generator',
   desc:'Magic Design, ë°°ê²½ ì œê±°, í…ìŠ¤íŠ¸-íˆ¬-ì´ë¯¸ì§€ ë“± ë¹„ì „ë¬¸ê°€ë„ ì‰½ê²Œ ì „ë¬¸ê°€ê¸‰ ë””ìì¸ì„ ì™„ì„±.',
   tags:['ë””ìì¸','ë¬´ë£Œ'], score:81, change:+4.2, sns:{x:75,reddit:60,youtube:78,github:10}, free:true,
   life:['marketer','office','freelancer','student','creator']},
  {id:11, cat:'image',      icon:'ğŸ–¼ï¸', name:'Stable Diffusion', url:'https://stability.ai',
   desc:'ì˜¤í”ˆì†ŒìŠ¤ ì´ë¯¸ì§€ ìƒì„± AI. ë¡œì»¬ì—ì„œ ë¬´ë£Œë¡œ ì‹¤í–‰ ê°€ëŠ¥, ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ ììœ ë¡œì›Œ ê°œë°œìì—ê²Œ ì¸ê¸°.',
   tags:['ì´ë¯¸ì§€ ìƒì„±','ë¬´ë£Œ','API','ì˜¤í”ˆì†ŒìŠ¤'], score:78, change:-0.5, sns:{x:65,reddit:82,youtube:80,github:95}, free:true,
   life:['freelancer','creator','startup']},
  {id:12, cat:'code',       icon:'ğŸ¦™', name:'Ollama',            url:'https://ollama.com',
   desc:'ë¡œì»¬ì—ì„œ LLMì„ ì‹¤í–‰í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë„êµ¬. Llama, Mistral ë“± ë‹¤ì–‘í•œ ëª¨ë¸ì„ PCì—ì„œ ë¬´ë£Œ ì‹¤í–‰.',
   tags:['ì½”ë”©','ë¬´ë£Œ','ì˜¤í”ˆì†ŒìŠ¤','API'], score:76, change:+9.1, sns:{x:70,reddit:78,youtube:70,github:98}, free:true,
   life:['student','freelancer','startup']},
  {id:13, cat:'productivity',icon:'ğŸ“…', name:'Motion AI',        url:'https://www.usemotion.com',
   desc:'AIê°€ í•˜ë£¨ ì¼ì •ì„ ìë™ ìµœì í™”. íšŒì˜Â·ì—…ë¬´Â·ë°ë“œë¼ì¸ì„ ë¶„ì„í•´ ê°€ì¥ íš¨ìœ¨ì ì¸ ìŠ¤ì¼€ì¤„ì„ ì¡ì•„ì¤ë‹ˆë‹¤.',
   tags:['ìƒì‚°ì„±','ìœ ë£Œ'], score:74, change:+6.8, sns:{x:68,reddit:62,youtube:52,github:10}, free:false,
   life:['office','startup','freelancer']},
  {id:14, cat:'text',       icon:'ğŸ“', name:'Grammarly AI',      url:'https://www.grammarly.com',
   desc:'AI ê¸°ë°˜ ì˜ì–´ ë¬¸ë²•Â·êµì • ë„êµ¬. ì´ë©”ì¼, ë³´ê³ ì„œ, ì—ì„¸ì´ì˜ ì–´ì¡°ì™€ ëª…í™•ì„±ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°œì„ .',
   tags:['í…ìŠ¤íŠ¸','ë¬´ë£Œ'], score:72, change:-0.3, sns:{x:62,reddit:58,youtube:68,github:15}, free:true,
   life:['student','office','freelancer']},
  {id:15, cat:'data',       icon:'ğŸ“Š', name:'Julius AI',         url:'https://julius.ai',
   desc:'ë°ì´í„° ë¶„ì„ íŠ¹í™” AI. CSVÂ·Excelì„ ì—…ë¡œë“œí•˜ë©´ AIê°€ ë¶„ì„Â·ì‹œê°í™”Â·ì¸ì‚¬ì´íŠ¸ ë„ì¶œì„ ìë™ ìˆ˜í–‰.',
   tags:['ë°ì´í„°','ë¬´ë£Œ','API'], score:70, change:+11.3, sns:{x:60,reddit:55,youtube:62,github:42}, free:true,
   life:['office','startup','student','marketer']},
  {id:16, cat:'design',     icon:'âœ¨', name:'Figma AI',          url:'https://www.figma.com/ai',
   desc:'Figmaì— í†µí•©ëœ AI. ìë™ ë ˆì´ì•„ì›ƒ ì œì•ˆ, ë””ìì¸ ìƒì„±, í”„ë¡œí† íƒ€ì… ê°•í™”ë¡œ UI/UX ì†ë„ í–¥ìƒ.',
   tags:['ë””ìì¸','ìœ ë£Œ'], score:68, change:+3.0, sns:{x:65,reddit:60,youtube:72,github:35}, free:false,
   life:['freelancer','startup','office']},
  {id:17, cat:'productivity',icon:'ğŸ¤', name:'Otter AI',         url:'https://otter.ai',
   desc:'íšŒì˜ ìë™ ë…¹ì·¨Â·ìš”ì•½Â·í•  ì¼ ì¶”ì¶œ AI. ZoomÂ·MeetÂ·Teamsì™€ ì—°ë™í•´ íšŒì˜ ë‚´ìš©ì„ ìë™ í…ìŠ¤íŠ¸ ë³€í™˜.',
   tags:['ìƒì‚°ì„±','ë¬´ë£Œ'], score:66, change:+2.4, sns:{x:58,reddit:52,youtube:58,github:12}, free:true,
   life:['office','startup']},
  {id:18, cat:'text',       icon:'ğŸ“£', name:'Jasper AI',         url:'https://www.jasper.ai',
   desc:'ë§ˆì¼€íŒ…Â·ì¹´í”¼ë¼ì´íŒ… íŠ¹í™” AI. ë¸”ë¡œê·¸, ê´‘ê³  ë¬¸êµ¬, SNS í¬ìŠ¤íŒ… ë“± ë§ˆì¼€í„°ë¥¼ ìœ„í•œ ì½˜í…ì¸  ë¹ ë¥´ê²Œ ìƒì„±.',
   tags:['í…ìŠ¤íŠ¸','ìœ ë£Œ','ë§ˆì¼€íŒ…'], score:64, change:-1.8, sns:{x:60,reddit:50,youtube:60,github:18}, free:false,
   life:['marketer','freelancer']},
  {id:19, cat:'audio',      icon:'ğŸ™ï¸', name:'ElevenLabs',        url:'https://elevenlabs.io',
   desc:'ì—…ê³„ ìµœê³  ìˆ˜ì¤€ì˜ AI ìŒì„± í•©ì„±. ê°ì •Â·ì–µì–‘ê¹Œì§€ ì‚´ë¦° ìì—°ìŠ¤ëŸ¬ìš´ ëª©ì†Œë¦¬ ë³µì œì™€ ë‹¤êµ­ì–´ ë‚˜ë ˆì´ì…˜ ìƒì„±.',
   tags:['ì˜¤ë””ì˜¤','ë¬´ë£Œ','API'], score:62, change:+8.5, sns:{x:72,reddit:68,youtube:70,github:40}, free:true,
   life:['creator','marketer','freelancer']},
  {id:20, cat:'video',      icon:'ğŸ¬', name:'Runway ML',          url:'https://runwayml.com',
   desc:'í…ìŠ¤íŠ¸Â·ì´ë¯¸ì§€ë¡œ ê³ í’ˆì§ˆ ì˜ìƒì„ ìƒì„±í•˜ëŠ” AI. Gen-3 Alpha ëª¨ë¸ë¡œ ì˜í™”ê¸‰ ë¹„ë””ì˜¤ ì œì‘ ê°€ëŠ¥.',
   tags:['ì˜ìƒ','ìœ ë£Œ','API'], score:60, change:+4.2, sns:{x:68,reddit:62,youtube:75,github:28}, free:false,
   life:['creator','freelancer','startup']},
  {id:21, cat:'text',       icon:'ğŸ’¬', name:'Character.AI',       url:'https://character.ai',
   desc:'ë‹¤ì–‘í•œ ìºë¦­í„°ì™€ ëŒ€í™”í•˜ëŠ” AI í”Œë«í¼. ìœ ëª…ì¸Â·ì• ë‹ˆë©”ì´ì…˜Â·ì°½ì‘ ìºë¦­í„°ì™€ ëª°ì…ê° ìˆëŠ” ë¡¤í”Œë ˆì´ ì œê³µ.',
   tags:['í…ìŠ¤íŠ¸','ë¬´ë£Œ'], score:58, change:-1.2, sns:{x:78,reddit:72,youtube:65,github:12}, free:true,
   life:['student','creator']},
  {id:22, cat:'text',       icon:'â™Š', name:'Google Gemini',      url:'https://gemini.google.com',
   desc:'êµ¬ê¸€ì˜ ë©€í‹°ëª¨ë‹¬ AI. í…ìŠ¤íŠ¸Â·ì´ë¯¸ì§€Â·ì½”ë“œÂ·ìŒì„±ì„ ë™ì‹œì— ì²˜ë¦¬í•˜ë©° Google ì„œë¹„ìŠ¤ì™€ ê¹Šì´ í†µí•©.',
   tags:['í…ìŠ¤íŠ¸','ë¬´ë£Œ','API'], score:56, change:+6.8, sns:{x:70,reddit:55,youtube:72,github:35}, free:true,
   life:['office','student','startup','freelancer']},
  {id:23, cat:'productivity',icon:'ğŸªŸ', name:'Microsoft Copilot',  url:'https://copilot.microsoft.com',
   desc:'Microsoft 365ì— ë‚´ì¥ëœ AI. WordÂ·ExcelÂ·TeamsÂ·Outlookì—ì„œ ë¬¸ì„œ ìš”ì•½, ë°ì´í„° ë¶„ì„, íšŒì˜ ì •ë¦¬ ìë™í™”.',
   tags:['ìƒì‚°ì„±','ìœ ë£Œ'], score:54, change:+2.1, sns:{x:65,reddit:52,youtube:68,github:22}, free:false,
   life:['office','startup']},
  {id:24, cat:'image',      icon:'ğŸ”¥', name:'Adobe Firefly',      url:'https://firefly.adobe.com',
   desc:'Adobe ìƒíƒœê³„ì— í†µí•©ëœ ìƒì„±í˜• AI. ìƒì—…ì  ì‚¬ìš©ì´ ì•ˆì „í•œ ì´ë¯¸ì§€ ìƒì„±Â·ë°°ê²½ êµì²´Â·í…ìŠ¤íŠ¸ íš¨ê³¼ ì œê³µ.',
   tags:['ì´ë¯¸ì§€ ìƒì„±','ë¬´ë£Œ','API'], score:52, change:+1.5, sns:{x:62,reddit:48,youtube:65,github:18}, free:true,
   life:['designer','marketer','freelancer','creator']},
  {id:25, cat:'productivity',icon:'âš¡', name:'Gamma',             url:'https://gamma.app',
   desc:'AIê°€ í”„ë ˆì  í…Œì´ì…˜Â·ë¬¸ì„œÂ·ì›¹í˜ì´ì§€ë¥¼ ìë™ ìƒì„±. í…ìŠ¤íŠ¸ ì…ë ¥ë§Œìœ¼ë¡œ ìˆ˜ ì´ˆ ë§Œì— ì™„ì„±ëœ ìŠ¬ë¼ì´ë“œ ì™„ì„±.',
   tags:['ìƒì‚°ì„±','ë¬´ë£Œ'], score:51, change:+9.3, sns:{x:60,reddit:55,youtube:58,github:8}, free:true,
   life:['student','office','startup','marketer']},
  {id:26, cat:'video',      icon:'ğŸ¥', name:'Pika Labs',          url:'https://pika.art',
   desc:'í…ìŠ¤íŠ¸ì™€ ì´ë¯¸ì§€ë¥¼ ì˜ìƒìœ¼ë¡œ ë³€í™˜í•˜ëŠ” AI. ì§ê´€ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¡œ ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ìˆí¼ ë¹„ë””ì˜¤ ì œì‘ ê°€ëŠ¥.',
   tags:['ì˜ìƒ','ë¬´ë£Œ'], score:49, change:+3.7, sns:{x:65,reddit:55,youtube:62,github:15}, free:true,
   life:['creator','marketer','freelancer']},
  {id:27, cat:'video',      icon:'ğŸŒ™', name:'Luma AI',            url:'https://lumalabs.ai',
   desc:'Dream Machineìœ¼ë¡œ ìœ ëª…í•œ ì˜ìƒ ìƒì„± AI. ë¬¼ë¦¬ì ìœ¼ë¡œ ì‚¬ì‹¤ì ì¸ ì›€ì§ì„ê³¼ ì¹´ë©”ë¼ ì›Œí¬ë¥¼ ìë™ìœ¼ë¡œ êµ¬í˜„.',
   tags:['ì˜ìƒ','ë¬´ë£Œ','API'], score:47, change:+12.1, sns:{x:62,reddit:52,youtube:58,github:20}, free:true,
   life:['creator','freelancer']},
  {id:28, cat:'text',       icon:'ğŸŒ', name:'DeepL',              url:'https://www.deepl.com',
   desc:'ìµœê³  í’ˆì§ˆì˜ AI ë²ˆì—­ ì„œë¹„ìŠ¤. ë¬¸ë§¥ì„ íŒŒì•…í•´ ìì—°ìŠ¤ëŸ¬ìš´ ë²ˆì—­ì„ ì œê³µí•˜ë©° ì „ë¬¸ ë¶„ì•¼ ë²ˆì—­ ì •í™•ë„ê°€ íƒì›”.',
   tags:['í…ìŠ¤íŠ¸','ë¬´ë£Œ','API'], score:45, change:-0.8, sns:{x:55,reddit:50,youtube:52,github:30}, free:true,
   life:['office','student','freelancer']},
  {id:29, cat:'code',       icon:'ğŸ’¨', name:'Windsurf',           url:'https://windsurf.com',
   desc:'Codeiumì´ ë§Œë“  AI ì½”ë“œ ì—ë””í„°. Cascade AI ì—ì´ì „íŠ¸ê°€ ë©€í‹°íŒŒì¼ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì´í•´í•˜ê³  ììœ¨ ìˆ˜ì •.',
   tags:['ì½”ë”©','ë¬´ë£Œ'], score:43, change:+15.6, sns:{x:68,reddit:60,youtube:55,github:72}, free:true,
   life:['freelancer','startup','student']},
  {id:30, cat:'video',      icon:'ğŸ­', name:'HeyGen',             url:'https://www.heygen.com',
   desc:'AI ì•„ë°”íƒ€ë¡œ ì˜ìƒì„ ì œì‘í•˜ëŠ” í”Œë«í¼. í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ë©´ ì‹¤ì œ ì‚¬ëŒì²˜ëŸ¼ ë§í•˜ëŠ” í”„ë ˆì  í…Œì´ì…˜ ì˜ìƒ ìë™ ìƒì„±.',
   tags:['ì˜ìƒ','ìœ ë£Œ'], score:41, change:+7.2, sns:{x:58,reddit:45,youtube:62,github:10}, free:false,
   life:['marketer','creator','startup']},
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   1. TICKER BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TICKER_ITEMS = [
  {icon:'ğŸ”¥', type:'hot',  text:'ChatGPT ì–¸ê¸‰ëŸ‰ 15% ìƒìŠ¹ ì¤‘!'},
  {icon:'ğŸ†•', type:'new',  text:'ì‹ ê·œ ë“±ë¡: Sora AI ì˜ìƒ ìƒì„± ê¸°ëŠ¥ ì˜¤í”ˆ'},
  {icon:'ğŸ“ˆ', type:'up',   text:'Perplexity ì‚¬ìš©ì ë¦¬ë·° ê¸‰ì¦'},
  {icon:'ğŸ”¥', type:'hot',  text:'Cursor IDE ì£¼ê°„ ë‹¤ìš´ë¡œë“œ 100ë§Œ ëŒíŒŒ'},
  {icon:'ğŸ†•', type:'new',  text:'Claude 3.5 Sonnet ì—…ë°ì´íŠ¸ ì¶œì‹œ'},
  {icon:'ğŸ“ˆ', type:'up',   text:'Suno AI ì£¼ê°„ SNS ì–¸ê¸‰ëŸ‰ +28%'},
  {icon:'ğŸ”¥', type:'hot',  text:'GitHub Copilot ê¸°ì—… ë„ì…ë¥  ì—­ëŒ€ ìµœê³ '},
  {icon:'ğŸ†•', type:'new',  text:'Midjourney v7 ì•ŒíŒŒ í…ŒìŠ¤íŠ¸ ì‹œì‘'},
  {icon:'ğŸ“ˆ', type:'up',   text:'Julius AI ë°ì´í„° ë¶„ì„ ì¿¼ë¦¬ +45% ì¦ê°€'},
  {icon:'ğŸ”¥', type:'hot',  text:'Notion AI ì›”ê°„ í™œì„± ì‚¬ìš©ì 5000ë§Œ ëŒíŒŒ'},
  {icon:'ğŸ†•', type:'new',  text:'Figma AI ìë™ ì»´í¬ë„ŒíŠ¸ ìƒì„± ê¸°ëŠ¥ ì¶”ê°€'},
  {icon:'ğŸ“ˆ', type:'up',   text:'Ollama ë¡œì»¬ LLM ì‹¤í–‰ ë ˆí¬ GitHub ìŠ¤íƒ€ ê¸‰ì¦'},
];

function buildTicker() {
  const track = document.getElementById('tickerTrack');
  const makeItem = ({icon, type, text}) => {
    const div = document.createElement('span');
    div.className = 'ticker-item';
    div.innerHTML = `<span class="ti-icon">${icon}</span><span class="ti-${type}">${text}</span>`;
    return div;
  };
  const sep = () => { const s=document.createElement('span'); s.className='ticker-sep'; s.textContent='Â·'; return s; };
  // duplicate for seamless loop
  [...TICKER_ITEMS, ...TICKER_ITEMS].forEach((item, i) => {
    track.appendChild(makeItem(item));
    track.appendChild(sep());
  });
}
buildTicker();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARD HELPERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SC = [{min:92,c:'#00e5ff'},{min:80,c:'#7c3aed'},{min:65,c:'#f97316'},{min:0,c:'#5a6478'}];
function scoreColor(s){ for(const x of SC) if(s>=x.min) return x.c; return '#5a6478'; }

const LIFE_LABELS = {office:'ğŸ’¼ ì§ì¥ì¸',freelancer:'ğŸ–¥ï¸ í”„ë¦¬ëœì„œ',student:'ğŸ“ ëŒ€í•™ìƒ',creator:'ğŸ¥ í¬ë¦¬ì—ì´í„°',marketer:'ğŸ“£ ë§ˆì¼€í„°',startup:'ğŸš€ ìŠ¤íƒ€íŠ¸ì—…'};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BRAND ICON SYSTEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
// si: Simple Icons slug, dark:true = ì•„ì´ì½˜ì´ ê²€ì •ìƒ‰(ë‹¤í¬ëª¨ë“œì—ì„œ ë°˜ì „ í•„ìš”)
// fav: Google Favicon ë„ë©”ì¸
const TOOL_ICONS = {
  1:  { si:'openai',          dark:true  },
  2:  { fav:'midjourney.com'             },
  3:  { si:'github',          dark:true  },
  4:  { si:'anthropic',       dark:false },
  5:  { fav:'cursor.com'                 },
  6:  { si:'openai',          dark:true  },
  7:  { si:'perplexity',      dark:true  },
  8:  { fav:'suno.com'                   },
  9:  { si:'notion',          dark:true  },
  10: { si:'canva',           dark:false },
  11: { fav:'stability.ai'               },
  12: { fav:'ollama.com'                 },
  13: { fav:'usemotion.com'              },
  14: { si:'grammarly',       dark:false },
  15: { fav:'julius.ai'                  },
  16: { si:'figma',           dark:false },
  17: { fav:'otter.ai'                   },
  18: { fav:'jasper.ai'                  },
  19: { fav:'elevenlabs.io'              },
  20: { fav:'runwayml.com'               },
  21: { fav:'character.ai'               },
  22: { si:'googlegemini',  dark:false   },
  23: { si:'microsoftcopilot', dark:false },
  24: { si:'adobefirefly',  dark:false   },
  25: { fav:'gamma.app'                  },
  26: { fav:'pika.art'                   },
  27: { fav:'lumalabs.ai'                },
  28: { si:'deepl',         dark:false   },
  29: { fav:'windsurf.com'               },
  30: { fav:'heygen.com'                 },
};

function getIconHtml(tool) {
  const cfg = TOOL_ICONS[tool.id];
  if (!cfg) return tool.icon;
  if (cfg.si) {
    const cls = 'brand-img' + (cfg.dark ? ' si-dark' : '');
    return `<img class="${cls}" src="https://cdn.simpleicons.org/${cfg.si}" alt="${tool.name}" loading="lazy" onerror="this.parentNode.textContent=this.parentNode.dataset.emoji">`;
  }
  if (cfg.fav) {
    return `<img class="brand-img brand-fav" src="https://www.google.com/s2/favicons?domain=${cfg.fav}&sz=64" alt="${tool.name}" loading="lazy" onerror="this.parentNode.textContent=this.parentNode.dataset.emoji">`;
  }
  return tool.icon;
}

function renderCard(tool, idx) {
  const c = scoreColor(tool.score);
  const changeHtml = tool.change>=0
    ? `<div class="score-change up">â–² ${tool.change.toFixed(1)}%</div>`
    : `<div class="score-change down">â–¼ ${Math.abs(tool.change).toFixed(1)}%</div>`;
  const livePip = tool.isLive ? `<span class="live-pip" title="ì‹¤ì‹œê°„ ë°ì´í„°">â— LIVE</span>` : '';
  const tagsHtml = tool.tags.map(t=>{
    let cls='tag-cat';
    if(t==='ë¬´ë£Œ') cls='tag-free'; else if(t==='ìœ ë£Œ') cls='tag-paid'; else if(t==='API') cls='tag-api';
    return `<span class="tag ${cls}">${t}</span>`;
  }).join('');
  const lifeBadges = tool.life.slice(0,3).map(l=>`<span class="life-badge">${LIFE_LABELS[l]}</span>`).join('');
  const snsR = (p,v,cls)=>`<div class="sns-item ${cls}"><div class="sns-val">${v}</div><div class="sns-platform">${p}</div><div class="sns-bar"><div class="sns-bar-fill" style="width:${v}%"></div></div></div>`;
  const isSelected = selectedIds.has(tool.id);
  return `
<div class="card${isSelected?' selected':''}${idx<3?' card-rank-'+(idx+1):''}" style="animation-delay:${idx*0.05}s" data-id="${tool.id}" onclick="handleCardClick(event,${tool.id})">
  ${lifeBadges?`<div class="card-life-badges">${lifeBadges}</div>`:''}
  <div class="card-top">
    <div class="tool-icon" style="background:${c}18;border-color:${c}28" data-emoji="${tool.icon}">${getIconHtml(tool)}</div>
    <div class="card-name-row">
      <div class="rank-badge${idx<3?' rank-top-'+(idx+1):''}">
        ${idx===0?'<span class="tier-badge tier-gold">GOLD</span>':idx===1?'<span class="tier-badge tier-platinum">PLATINUM</span>':idx===2?'<span class="tier-badge tier-silver">SILVER</span>':''}
        <span class="rank-num-text">#${idx+1}</span>
        <span class="rank-label-text">RANK</span>
        ${livePip}
      </div>
      <div class="tool-name">${tool.name}</div>
      <div class="score-inline">
        <div class="score-num" style="color:${c}">${tool.score}<span class="score-unit">/100</span></div>
        ${changeHtml}
      </div>
    </div>
  </div>
  <div class="score-bar-wrap">
    <div class="score-bar-bg"><div class="score-bar-fill" style="width:${tool.score}%;background:linear-gradient(90deg,${c}70,${c})"></div></div>
  </div>
  <div class="tool-desc">${tool.desc}</div>
  <div class="tags">${tagsHtml}</div>
  <div class="sns-row">
    ${snsR('X',tool.sns.x,'sns-x')}
    ${snsR('Reddit',tool.sns.reddit,'sns-reddit')}
    ${snsR('YouTube',tool.sns.youtube,'sns-yt')}
    ${snsR('GitHub',tool.sns.github,'sns-github')}
  </div>
  <div class="card-action" onclick="event.stopPropagation()">
    <a class="visit-btn" href="${tool.url}" target="_blank" rel="noopener noreferrer">ë°©ë¬¸í•˜ê¸° â†’</a>
    <label class="compare-check-wrap" title="ë¹„êµì— ì¶”ê°€">
      <input type="checkbox" class="cc-input" data-id="${tool.id}" ${isSelected?'checked':''} onchange="toggleCompare(${tool.id},this.checked)">
      <div class="compare-check">
        <div class="cc-box">${isSelected?'âœ“':''}</div>
        ë¹„êµ
      </div>
    </label>
    <button class="bookmark-btn${bookmarkedIds.has(tool.id)?' saved':''}" onclick="toggleBookmark(this)">${bookmarkedIds.has(tool.id)?'â­':'ğŸ”–'}</button>
  </div>
</div>`;
}

const BOOKMARKS_KEY = 'airank-bookmarks';
function loadBookmarks() {
  try { return new Set(JSON.parse(localStorage.getItem(BOOKMARKS_KEY)) || []); } catch(e) { return new Set(); }
}
function saveBookmarks(set) {
  try { localStorage.setItem(BOOKMARKS_KEY, JSON.stringify([...set])); } catch(e) {}
}
const bookmarkedIds = loadBookmarks();

function toggleBookmark(btn) {
  const id = parseInt(btn.closest('.card').dataset.id);
  if (bookmarkedIds.has(id)) {
    bookmarkedIds.delete(id);
    btn.classList.remove('saved');
    btn.textContent = 'ğŸ”–';
  } else {
    bookmarkedIds.add(id);
    btn.classList.add('saved');
    btn.textContent = 'â­';
  }
  saveBookmarks(bookmarkedIds);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTER / RENDER STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let cat='all', life='all', sort='score', search='';
let showAll = false;
const PAGE_SIZE = 18;

function render() {
  let data=[...TOOLS];
  if(cat!=='all')  data=data.filter(t=>t.cat===cat);
  if(life!=='all') data=data.filter(t=>t.life.includes(life));
  if(search){ const q=search.toLowerCase(); data=data.filter(t=>t.name.toLowerCase().includes(q)||t.desc.toLowerCase().includes(q)); }
  if(sort==='score')  data.sort((a,b)=>b.score-a.score);
  else if(sort==='growth') data.sort((a,b)=>b.change-a.change);
  else data.sort((a,b)=>a.name.localeCompare(b.name,'ko'));

  const hasMore = data.length > PAGE_SIZE && !showAll;
  const displayData = showAll ? data : data.slice(0, PAGE_SIZE);

  const grid=document.getElementById('cardGrid');
  grid.innerHTML = data.length
    ? displayData.map((t,i)=>renderCard(t,i)).join('')
    : `<div class="no-results"><big>ğŸ¤–</big>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.<br><small style="margin-top:.5rem;display:block">ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”</small></div>`;

  const wrap = document.getElementById('loadMoreWrap');
  const countEl = document.getElementById('loadMoreCount');
  wrap.style.display = hasMore ? 'flex' : 'none';
  if(hasMore) countEl.textContent = `+${data.length - PAGE_SIZE}`;
}

document.getElementById('filterRowType').addEventListener('click',e=>{
  const b=e.target.closest('.filter-btn'); if(!b) return;
  document.querySelectorAll('#filterRowType .filter-btn').forEach(x=>x.classList.remove('active'));
  b.classList.add('active'); cat=b.dataset.cat; showAll=false; render();
});
document.getElementById('filterRowLife').addEventListener('click',e=>{
  const b=e.target.closest('.filter-btn'); if(!b) return;
  document.querySelectorAll('#filterRowLife .filter-btn').forEach(x=>x.classList.remove('active'));
  b.classList.add('active'); life=b.dataset.life; showAll=false; render();
});
document.querySelectorAll('.sort-btn').forEach(b=>b.addEventListener('click',()=>{
  document.querySelectorAll('.sort-btn').forEach(x=>x.classList.remove('active'));
  b.classList.add('active'); sort=b.dataset.sort; showAll=false; render();
}));
document.getElementById('searchInput').addEventListener('input',e=>{ search=e.target.value; showAll=e.target.value.length>0; render(); });
document.getElementById('loadMoreBtn').addEventListener('click',()=>{ showAll=true; render(); });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const html=document.documentElement;
function setTheme(t){ html.setAttribute('data-theme',t); document.getElementById('themeLabel').textContent=t==='dark'?'ğŸŒ™ ë‹¤í¬':'â˜€ï¸ ë¼ì´íŠ¸'; localStorage.setItem('airank-theme',t); }
document.getElementById('themeToggle').addEventListener('click',()=>setTheme(html.getAttribute('data-theme')==='dark'?'light':'dark'));
const savedTheme=localStorage.getItem('airank-theme'); if(savedTheme) setTheme(savedTheme);

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   3. COMPARE MODE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const selectedIds = new Set();
const compareBar = document.getElementById('compareBar');
const comparePills = document.getElementById('comparePills');
const compareCount = document.getElementById('compareCount');

function toggleCompare(id, checked) {
  if(checked) {
    if(selectedIds.size >= 4) { // max 4
      const inp = document.querySelector(`.cc-input[data-id="${id}"]`);
      if(inp) inp.checked=false;
      return;
    }
    selectedIds.add(id);
  } else {
    selectedIds.delete(id);
  }
  updateCompareBar();
  // update card classes
  document.querySelectorAll('.card').forEach(card=>{
    const cid = parseInt(card.dataset.id);
    if(selectedIds.has(cid)) {
      card.classList.add('selected');
      const box = card.querySelector('.cc-box');
      if(box) box.textContent='âœ“';
      const cc = card.querySelector('.compare-check');
      if(cc) cc.style.borderColor='var(--accent)';
    } else {
      card.classList.remove('selected');
      const box = card.querySelector('.cc-box');
      if(box) box.textContent='';
      const cc = card.querySelector('.compare-check');
      if(cc) cc.style.borderColor='';
    }
  });
}

function updateCompareBar() {
  const count = selectedIds.size;
  compareCount.textContent = count;
  if(count >= 2) {
    compareBar.classList.add('visible');
  } else {
    compareBar.classList.remove('visible');
  }
  // update pills
  comparePills.innerHTML = '';
  selectedIds.forEach(id=>{
    const tool = TOOLS.find(t=>t.id===id);
    if(!tool) return;
    const pill = document.createElement('div');
    pill.className='compare-pill';
    pill.innerHTML=`${tool.icon} ${tool.name} <span class="cp-remove" onclick="removeFromCompare(${id})">âœ•</span>`;
    comparePills.appendChild(pill);
  });
}

function removeFromCompare(id) {
  selectedIds.delete(id);
  const inp = document.querySelector(`.cc-input[data-id="${id}"]`);
  if(inp) inp.checked=false;
  const card = document.querySelector(`.card[data-id="${id}"]`);
  if(card) {
    card.classList.remove('selected');
    const box = card.querySelector('.cc-box');
    if(box) box.textContent='';
  }
  updateCompareBar();
}

document.getElementById('compareClearBtn').addEventListener('click',()=>{
  selectedIds.forEach(id=>removeFromCompare(id));
  selectedIds.clear();
  updateCompareBar();
  render();
});

document.getElementById('compareGoBtn').addEventListener('click',()=>{ openCompareModal(); });

function openCompareModal() {
  const tools = [...selectedIds].map(id=>TOOLS.find(t=>t.id===id)).filter(Boolean);
  if(tools.length<2) return;

  const platforms = [
    {key:'x',      label:'X (íŠ¸ìœ„í„°)', color:'#1d9bf0'},
    {key:'reddit', label:'Reddit',     color:'#ff4500'},
    {key:'youtube',label:'YouTube',     color:'#ff0000'},
    {key:'github', label:'GitHub',     color:'#22c55e'},
  ];

  // find winners per platform
  const winners = {};
  platforms.forEach(p=>{
    let max=-1, wId=null;
    tools.forEach(t=>{ if(t.sns[p.key]>max){ max=t.sns[p.key]; wId=t.id; } });
    winners[p.key]=wId;
  });
  const scoreWinner = tools.reduce((a,b)=>a.score>b.score?a:b).id;

  let html = `<div class="compare-table-wrap"><table class="compare-table">`;
  // header row
  html += `<tr><th>ì§€í‘œ</th>`;
  tools.forEach(t=>{ html+=`<th>${t.icon} ${t.name}</th>`; });
  html += `</tr>`;

  // SNS Score row
  html += `<tr>`;
  html += `<td style="font-weight:600;color:var(--text)">ğŸ“Š SNS ì¢…í•© ì ìˆ˜</td>`;
  tools.forEach(t=>{
    const isW = t.id===scoreWinner;
    html += `<td class="${isW?'compare-winner':''}">
      <span class="ct-score" style="color:${scoreColor(t.score)}">${t.score}</span>
      ${isW?'<span class="winner-badge">ğŸ‘‘ ìµœê³ </span>':''}
      <div class="ct-mini-bar"><div class="ct-mini-bar-fill" style="width:${t.score}%;background:${scoreColor(t.score)}"></div></div>
    </td>`;
  });
  html += `</tr>`;

  // growth row
  html += `<tr><td style="font-weight:600;color:var(--text)">ğŸ“ˆ ì£¼ê°„ ì„±ì¥ë¥ </td>`;
  const growthWinner = tools.reduce((a,b)=>a.change>b.change?a:b).id;
  tools.forEach(t=>{
    const isW = t.id===growthWinner;
    const isUp = t.change>=0;
    html += `<td class="${isW?'compare-winner':''}">
      <span style="color:${isUp?'var(--green)':'var(--red)'}; font-weight:600">${isUp?'â–²':'â–¼'} ${Math.abs(t.change).toFixed(1)}%</span>
      ${isW?'<span class="winner-badge">ğŸš€ ê¸‰ì„±ì¥</span>':''}
    </td>`;
  });
  html += `</tr>`;

  // per-platform rows
  platforms.forEach(p=>{
    html += `<tr><td style="font-weight:600;color:var(--text)"><span style="color:${p.color}">â—</span> ${p.label}</td>`;
    tools.forEach(t=>{
      const isW = t.id===winners[p.key];
      const val = t.sns[p.key];
      html += `<td class="${isW?'compare-winner':''} ct-bar-cell">
        <span style="font-family:'Syne',sans-serif;font-weight:700;color:var(--text)">${val}</span>
        ${isW?'<span class="winner-badge">TOP</span>':''}
        <div class="ct-mini-bar"><div class="ct-mini-bar-fill" style="width:${val}%;background:${p.color}"></div></div>
      </td>`;
    });
    html += `</tr>`;
  });

  // free/paid row
  html += `<tr><td style="font-weight:600;color:var(--text)">ğŸ’° ê°€ê²©</td>`;
  tools.forEach(t=>{
    html += `<td><span class="ct-tag ${t.free?'tag-free':'tag-paid'}">${t.free?'ë¬´ë£Œ':'ìœ ë£Œ'}</span></td>`;
  });
  html += `</tr>`;

  // tags row
  html += `<tr><td style="font-weight:600;color:var(--text)">ğŸ·ï¸ íƒœê·¸</td>`;
  tools.forEach(t=>{
    html += `<td>${t.tags.map(tag=>`<span class="ct-tag tag-cat">${tag}</span>`).join('')}</td>`;
  });
  html += `</tr>`;

  html += `</table></div>`;

  // summary sentence
  const topTool = tools.reduce((a,b)=>a.score>b.score?a:b);
  html += `<div style="margin-top:1.2rem;padding:1rem;background:var(--surface2);border-radius:10px;border:1px solid var(--border);font-size:.82rem;color:var(--text-dim);line-height:1.6;">
    ğŸ’¡ <strong style="color:var(--text)">${topTool.name}</strong>ì´ SNS ì¢…í•© ì ìˆ˜ <strong style="color:${scoreColor(topTool.score)}">${topTool.score}ì </strong>ìœ¼ë¡œ ê°€ì¥ ë†’ì€ íŠ¸ë Œë“œ ì ìˆ˜ë¥¼ ê¸°ë¡ ì¤‘ì…ë‹ˆë‹¤.
  </div>`;

  document.getElementById('compareBody').innerHTML = html;
  document.getElementById('compareOverlay').classList.add('open');
}

document.getElementById('closeCompareBtn').addEventListener('click',()=>document.getElementById('compareOverlay').classList.remove('open'));
document.getElementById('compareOverlay').addEventListener('click',e=>{ if(e.target===e.currentTarget) e.currentTarget.classList.remove('open'); });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   2. WIZARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const WIZARD_Q1 = {
  question:'ì–´ë–¤ ë¶„ì•¼ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”?',
  opts:[
    {icon:'ğŸ’¼', label:'ì§ì¥ì¸/íšŒì‚¬ì›', sub:'ì—…ë¬´Â·ë³´ê³ ì„œÂ·íšŒì˜ ì¤‘ì‹¬', value:'office'},
    {icon:'ğŸ–¥ï¸', label:'í”„ë¦¬ëœì„œ', sub:'ë…ë¦½ ì‘ì—…Â·í´ë¼ì´ì–¸íŠ¸ ëŒ€ì‘', value:'freelancer'},
    {icon:'ğŸ“', label:'ëŒ€í•™ìƒ/í•™ìƒ', sub:'ê³¼ì œÂ·ë…¼ë¬¸Â·í•™ìŠµ ì¤‘ì‹¬', value:'student'},
    {icon:'ğŸ¥', label:'í¬ë¦¬ì—ì´í„°', sub:'ì˜ìƒÂ·ì½˜í…ì¸ Â·SNS ìš´ì˜', value:'creator'},
    {icon:'ğŸ“£', label:'ë§ˆì¼€í„°', sub:'ê´‘ê³ Â·ì¹´í”¼Â·ë°ì´í„° ë¶„ì„', value:'marketer'},
    {icon:'ğŸš€', label:'ìŠ¤íƒ€íŠ¸ì—…/ì°½ì—…', sub:'ë¹ ë¥¸ ì œí’ˆ ê°œë°œÂ·í”¼ì¹­', value:'startup'},
  ]
};
const WIZARD_Q2 = {
  office:    { question:'ì£¼ë¡œ ì–´ë–¤ ì‘ì—…ì„ í•˜ì‹œë‚˜ìš”?', opts:[
    {icon:'ğŸ“', label:'ë¬¸ì„œÂ·ë³´ê³ ì„œ ì‘ì„±', sub:'ìš”ì•½, ì •ë¦¬, ì´ë©”ì¼', value:'text'},
    {icon:'ğŸ“Š', label:'ë°ì´í„° ë¶„ì„', sub:'ì—‘ì…€, ì‹œê°í™”, ì¸ì‚¬ì´íŠ¸', value:'data'},
    {icon:'ğŸ“…', label:'ì¼ì •Â·ì—…ë¬´ ê´€ë¦¬', sub:'ìŠ¤ì¼€ì¤„, í•  ì¼, íšŒì˜ë¡', value:'productivity'},
    {icon:'ğŸ”', label:'ì •ë³´ ìˆ˜ì§‘Â·ë¦¬ì„œì¹˜', sub:'ë¹ ë¥¸ ì¡°ì‚¬, íŒ©íŠ¸ì²´í¬', value:'search'},
  ]},
  freelancer:{ question:'ì£¼ë¡œ ì–´ë–¤ ì‘ì—…ì„ í•˜ì‹œë‚˜ìš”?', opts:[
    {icon:'ğŸ’»', label:'ê°œë°œÂ·ì½”ë”©', sub:'ì½”ë“œ ì‘ì„±, ë¦¬ë·°, ë””ë²„ê¹…', value:'code'},
    {icon:'ğŸ–Œï¸', label:'ë””ìì¸Â·í¸ì§‘', sub:'ì´ë¯¸ì§€, UI, ë¸Œëœë”©', value:'design'},
    {icon:'âœï¸', label:'ê¸€ì“°ê¸°Â·ë²ˆì—­', sub:'ì¹´í”¼, ì»¨í…ì¸ , ë²ˆì—­', value:'text'},
    {icon:'ğŸ¬', label:'ì˜ìƒÂ·ë¯¸ë””ì–´', sub:'í¸ì§‘, ì¸ë„¤ì¼, ìŒì•…', value:'video'},
  ]},
  student:   { question:'ì£¼ë¡œ ì–´ë–¤ ì‘ì—…ì„ í•˜ì‹œë‚˜ìš”?', opts:[
    {icon:'ğŸ“š', label:'ë…¼ë¬¸Â·ë¦¬í¬íŠ¸ ì‘ì„±', sub:'ìë£Œ ì¡°ì‚¬, êµ¬ì„±, ìš”ì•½', value:'text'},
    {icon:'ğŸ’»', label:'ì½”ë”©Â·í”„ë¡œì íŠ¸', sub:'ê³¼ì œ ì½”ë“œ, ì•Œê³ ë¦¬ì¦˜', value:'code'},
    {icon:'ğŸ”', label:'ì •ë³´ ìˆ˜ì§‘Â·ë¦¬ì„œì¹˜', sub:'ë¹ ë¥¸ ì¡°ì‚¬, ì •ë¦¬', value:'search'},
    {icon:'ğŸ¨', label:'ë°œí‘œ ìë£ŒÂ·ë””ìì¸', sub:'PPT, í¬ìŠ¤í„°, ì¸í¬ê·¸ë˜í”½', value:'design'},
  ]},
  creator:   { question:'ì£¼ë¡œ ì–´ë–¤ ì‘ì—…ì„ í•˜ì‹œë‚˜ìš”?', opts:[
    {icon:'ğŸ¬', label:'ì˜ìƒÂ·ìˆí¼ ì½˜í…ì¸ ', sub:'í¸ì§‘, ìŠ¤í¬ë¦½íŠ¸, ì¸ë„¤ì¼', value:'video'},
    {icon:'ğŸ¨', label:'ì´ë¯¸ì§€Â·ì•„íŠ¸ ì œì‘', sub:'ì¼ëŸ¬ìŠ¤íŠ¸, í‘œì§€, êµ¿ì¦ˆ', value:'image'},
    {icon:'ğŸµ', label:'ìŒì•…Â·ì‚¬ìš´ë“œ', sub:'BGM, íš¨ê³¼ìŒ, ë³´ì´ìŠ¤', value:'audio'},
    {icon:'âœï¸', label:'ë¸”ë¡œê·¸Â·SNS ê¸€ì“°ê¸°', sub:'ìº¡ì…˜, ìŠ¤í¬ë¦½íŠ¸, ê¸°íš', value:'text'},
  ]},
  marketer:  { question:'ì£¼ë¡œ ì–´ë–¤ ì‘ì—…ì„ í•˜ì‹œë‚˜ìš”?', opts:[
    {icon:'âœï¸', label:'ì¹´í”¼ë¼ì´íŒ…Â·ê¸€ì“°ê¸°', sub:'ê´‘ê³  ë¬¸êµ¬, ë‰´ìŠ¤ë ˆí„°', value:'text'},
    {icon:'ğŸ¨', label:'ë¹„ì£¼ì–¼ ì½˜í…ì¸  ì œì‘', sub:'ë°°ë„ˆ, SNS ì´ë¯¸ì§€', value:'image'},
    {icon:'ğŸ“Š', label:'ë°ì´í„°Â·ì„±ê³¼ ë¶„ì„', sub:'ì§€í‘œ, ë¦¬í¬íŠ¸, A/Bí…ŒìŠ¤íŠ¸', value:'data'},
    {icon:'ğŸ”', label:'íŠ¸ë Œë“œÂ·ê²½ìŸì‚¬ ì¡°ì‚¬', sub:'ë¦¬ì„œì¹˜, ì¸ì‚¬ì´íŠ¸', value:'search'},
  ]},
  startup:   { question:'ì£¼ë¡œ ì–´ë–¤ ì‘ì—…ì„ í•˜ì‹œë‚˜ìš”?', opts:[
    {icon:'ğŸ’»', label:'ì œí’ˆ ê°œë°œÂ·ì½”ë”©', sub:'MVP, API, ì½”ë“œ ë¦¬ë·°', value:'code'},
    {icon:'ğŸ“Š', label:'ë°ì´í„°Â·íˆ¬ì ë¶„ì„', sub:'ì§€í‘œ, í”¼ì¹­, ì‹œì¥ì¡°ì‚¬', value:'data'},
    {icon:'âœï¸', label:'ë¬¸ì„œÂ·í”¼ì¹˜ë± ì‘ì„±', sub:'ì‚¬ì—…ê³„íšì„œ, ë³´ë„ìë£Œ', value:'text'},
    {icon:'ğŸ¨', label:'ë¸Œëœë”©Â·ë””ìì¸', sub:'ë¡œê³ , UI, ë§ˆì¼€íŒ… ìë£Œ', value:'design'},
  ]},
};

let wizardStep=1, wizardQ1Val=null, wizardQ2Val=null;

function openWizard() {
  wizardStep=1; wizardQ1Val=null; wizardQ2Val=null;
  document.getElementById('wizardOverlay').classList.add('open');
  renderWizard();
}
function closeWizard() { document.getElementById('wizardOverlay').classList.remove('open'); }

function renderWizard() {
  const body = document.getElementById('wizardBody');
  const subtitle = document.getElementById('wizardSubtitle');

  if(wizardStep===1) {
    subtitle.textContent = 'ì§ì—…êµ°ê³¼ ì£¼ìš” ì‘ì—…ì„ ì„ íƒí•˜ë©´ ë”± ë§ëŠ” AIë¥¼ ì¶”ì²œí•´ë“œë ¤ìš”';
    body.innerHTML = `
      <div class="wizard-steps">
        <div class="wizard-step-dot done"></div>
        <div class="wizard-step-dot"></div>
      </div>
      <div class="wizard-q">${WIZARD_Q1.question}</div>
      <div class="wizard-opts">
        ${WIZARD_Q1.opts.map(o=>`
          <div class="wopt" data-val="${o.value}" onclick="selectWizardQ1('${o.value}')">
            <span class="wopt-icon">${o.icon}</span>
            <div class="wopt-text">
              <div class="wopt-label">${o.label}</div>
              <div class="wopt-sub">${o.sub}</div>
            </div>
          </div>`).join('')}
      </div>
      <div class="wizard-nav">
        <button class="wbtn" onclick="closeWizard()">ë‹«ê¸°</button>
        <button class="wbtn primary" id="wNext1" onclick="goWizardStep2()" disabled>ë‹¤ìŒ â†’</button>
      </div>`;
  } else if(wizardStep===2) {
    const q2 = WIZARD_Q2[wizardQ1Val];
    subtitle.textContent = '2ë‹¨ê³„: ì£¼ìš” ì‘ì—…ì„ ì„ íƒí•˜ì„¸ìš”';
    body.innerHTML = `
      <div class="wizard-steps">
        <div class="wizard-step-dot done"></div>
        <div class="wizard-step-dot done"></div>
      </div>
      <div class="wizard-q">${q2.question}</div>
      <div class="wizard-opts">
        ${q2.opts.map(o=>`
          <div class="wopt" data-val="${o.value}" onclick="selectWizardQ2('${o.value}')">
            <span class="wopt-icon">${o.icon}</span>
            <div class="wopt-text">
              <div class="wopt-label">${o.label}</div>
              <div class="wopt-sub">${o.sub}</div>
            </div>
          </div>`).join('')}
      </div>
      <div class="wizard-nav">
        <button class="wbtn" onclick="wizardStep=1;renderWizard()">â† ì´ì „</button>
        <button class="wbtn primary" id="wNext2" onclick="showWizardResults()" disabled>ì¶”ì²œë°›ê¸° âœ¨</button>
      </div>`;
  } else if(wizardStep===3) {
    // results
    subtitle.textContent = 'ë”± ë§ëŠ” AI ë„êµ¬ë¥¼ ì°¾ì•˜ì–´ìš”! ğŸ‰';
    const recs = TOOLS
      .filter(t=>t.life.includes(wizardQ1Val) && t.cat===wizardQ2Val)
      .sort((a,b)=>b.score-a.score)
      .slice(0,3);
    const fallback = TOOLS
      .filter(t=>t.life.includes(wizardQ1Val))
      .sort((a,b)=>b.score-a.score)
      .slice(0,3);
    const results = recs.length>=1 ? recs : fallback;

    body.innerHTML = `
      <div class="wizard-results-title">ğŸ¯ ì¶”ì²œ AI ë„êµ¬ ${results.length}ê°œ</div>
      ${results.map((t,i)=>`
        <div class="wizard-result-card">
          <div class="wrc-icon">${t.icon}</div>
          <div class="wrc-body">
            <div class="wrc-name">${t.name} ${i===0?'<span style="font-size:.65rem;color:var(--accent);font-weight:700;margin-left:4px">ğŸ¥‡ ìµœì  ì¶”ì²œ</span>':''}</div>
            <div class="wrc-desc">${t.desc}</div>
          </div>
          <div class="wrc-score">
            <span class="wrc-score-label">SNS ì ìˆ˜</span>
            <div class="wrc-score-num" style="color:${scoreColor(t.score)}">${t.score}</div>
          </div>
        </div>`).join('')}
      <div class="wizard-nav" style="justify-content:space-between">
        <button class="wbtn" onclick="wizardStep=1;wizardQ1Val=null;wizardQ2Val=null;renderWizard()">â†º ë‹¤ì‹œ ì°¾ê¸°</button>
        <button class="wbtn primary" onclick="applyWizardFilter()">ëª©ë¡ì—ì„œ ë³´ê¸° â†’</button>
      </div>`;
  }
}

function selectWizardQ1(val) {
  wizardQ1Val=val;
  document.querySelectorAll('#wizardBody .wopt').forEach(el=>el.classList.toggle('selected',el.dataset.val===val));
  const btn=document.getElementById('wNext1'); if(btn) btn.disabled=false;
}
function goWizardStep2() { if(!wizardQ1Val) return; wizardStep=2; renderWizard(); }
function selectWizardQ2(val) {
  wizardQ2Val=val;
  document.querySelectorAll('#wizardBody .wopt').forEach(el=>el.classList.toggle('selected',el.dataset.val===val));
  const btn=document.getElementById('wNext2'); if(btn) btn.disabled=false;
}
function showWizardResults() { if(!wizardQ2Val) return; wizardStep=3; renderWizard(); }

function applyWizardFilter() {
  closeWizard();
  // apply life filter
  document.querySelectorAll('#filterRowLife .filter-btn').forEach(b=>{
    b.classList.toggle('active', b.dataset.life===wizardQ1Val);
  });
  document.querySelectorAll('#filterRowType .filter-btn').forEach(b=>{
    b.classList.toggle('active', b.dataset.cat===wizardQ2Val);
  });
  life=wizardQ1Val; cat=wizardQ2Val;
  render();
  window.scrollTo({top:document.getElementById('cardGrid').offsetTop-80, behavior:'smooth'});
}

document.getElementById('openWizardBtn').addEventListener('click', openWizard);
document.getElementById('closeWizardBtn').addEventListener('click', closeWizard);
document.getElementById('wizardOverlay').addEventListener('click',e=>{ if(e.target===e.currentTarget) closeWizard(); });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DETAIL MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function handleCardClick(e, id) {
  if (e.target.closest('.compare-check-wrap') || e.target.closest('.card-action')) return;
  openDetail(id);
}

function openDetail(id) {
  const tool = TOOLS.find(t => t.id === id);
  if (!tool) return;
  document.getElementById('detailBody').innerHTML = buildDetailContent(tool);
  document.getElementById('detailOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeDetail() {
  document.getElementById('detailOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

function buildDetailContent(tool) {
  const c = scoreColor(tool.score);
  const rankInAll = [...TOOLS].sort((a,b) => b.score - a.score).findIndex(t => t.id === tool.id) + 1;
  const changeHtml = tool.change >= 0
    ? `<span style="color:var(--green);font-size:.8rem;font-weight:600">â–² ${tool.change.toFixed(1)}%</span>`
    : `<span style="color:var(--red);font-size:.8rem;font-weight:600">â–¼ ${Math.abs(tool.change).toFixed(1)}%</span>`;
  const livePip = tool.isLive ? `<span class="live-pip">â— LIVE</span>` : '';
  const isSelected = selectedIds.has(tool.id);

  const snsPlatforms = [
    { label: 'X (Twitter)', key: 'x',      color: '#1d9bf0' },
    { label: 'Reddit',      key: 'reddit',  color: '#ff4500' },
    { label: 'YouTube',     key: 'youtube', color: '#ff0000' },
    { label: 'GitHub',      key: 'github',  color: '#22c55e' },
  ];

  const snsHtml = snsPlatforms.map(p => `
    <div class="detail-sns-row">
      <div class="detail-sns-label">${p.label}</div>
      <div class="detail-sns-bar-bg">
        <div class="detail-sns-bar-fill" style="width:${tool.sns[p.key]}%;background:${p.color}99"></div>
      </div>
      <div class="detail-sns-val" style="color:${p.color}">${tool.sns[p.key]}</div>
    </div>`).join('');

  const tagsHtml = tool.tags.map(t => {
    let cls = 'tag-cat';
    if (t==='ë¬´ë£Œ') cls='tag-free'; else if (t==='ìœ ë£Œ') cls='tag-paid'; else if (t==='API') cls='tag-api';
    return `<span class="tag ${cls}">${t}</span>`;
  }).join('');

  const lifeHtml = tool.life.map(l => `<span class="life-badge">${LIFE_LABELS[l]}</span>`).join('');

  return `
    <div class="detail-hero">
      <div class="detail-icon" style="background:${c}18;border-color:${c}30" data-emoji="${tool.icon}">${getIconHtml(tool)}</div>
      <div style="flex:1;min-width:0">
        <div class="rank-num" style="margin-bottom:2px">#${rankInAll} <span>RANK</span>${livePip}</div>
        <div class="detail-name">${tool.name}</div>
        <div class="detail-score-row">
          <div class="detail-score-num" style="color:${c}">${tool.score}<span class="score-unit">/100</span></div>
          ${changeHtml}
        </div>
      </div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">ì†Œê°œ</div>
      <div class="detail-desc">${tool.desc}</div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">SNS í”Œë«í¼ë³„ ì ìˆ˜</div>
      <div class="detail-sns-list">${snsHtml}</div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">íƒœê·¸</div>
      <div class="detail-tags-wrap">${tagsHtml}</div>
    </div>

    <div class="detail-section">
      <div class="detail-section-title">ì¶”ì²œ ëŒ€ìƒ</div>
      <div class="detail-life-wrap">${lifeHtml}</div>
    </div>

    <div class="detail-footer">
      <a class="detail-visit-btn" href="${tool.url}" target="_blank" rel="noopener noreferrer">ğŸŒ ì‚¬ì´íŠ¸ ë°©ë¬¸í•˜ê¸°</a>
      <button class="detail-cmp-btn${isSelected?' active':''}" id="detailCmpBtn"
        onclick="toggleDetailCompare(${tool.id})">
        ${isSelected ? 'âœ“ ë¹„êµ ì¤‘' : '+ ë¹„êµ ì¶”ê°€'}
      </button>
    </div>`;
}

function toggleDetailCompare(id) {
  const isNowSelected = selectedIds.has(id);
  toggleCompare(id, !isNowSelected);
  const btn = document.getElementById('detailCmpBtn');
  if (!btn) return;
  const active = selectedIds.has(id);
  btn.className = 'detail-cmp-btn' + (active ? ' active' : '');
  btn.textContent = active ? 'âœ“ ë¹„êµ ì¤‘' : '+ ë¹„êµ ì¶”ê°€';
}

document.getElementById('closeDetailBtn').addEventListener('click', closeDetail);
document.getElementById('detailOverlay').addEventListener('click', e => {
  if (e.target === e.currentTarget) closeDetail();
});
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') closeDetail();
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIVE DATA â€” API FETCH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TOOL_QUERIES = {
  1:'ChatGPT', 2:'Midjourney', 3:'GitHub Copilot',
  4:'Claude Anthropic', 5:'Cursor IDE', 6:'Sora OpenAI',
  7:'Perplexity AI', 8:'Suno AI', 9:'Notion AI',
  10:'Canva AI', 11:'Stable Diffusion', 12:'Ollama LLM',
  13:'Motion AI', 14:'Grammarly', 15:'Julius AI',
  16:'Figma AI', 17:'Otter AI', 18:'Jasper AI',
  19:'ElevenLabs', 20:'Runway ML', 21:'Character AI',
  22:'Google Gemini', 23:'Microsoft Copilot', 24:'Adobe Firefly',
  25:'Gamma AI', 26:'Pika Labs', 27:'Luma Dream Machine',
  28:'DeepL translate', 29:'Windsurf Codeium', 30:'HeyGen AI avatar'
};

// YouTube Data API v3 í‚¤ (https://console.cloud.google.com ì—ì„œ ë¬´ë£Œ ë°œê¸‰)
const YOUTUBE_API_KEY = 'AIzaSyBnnC7LM1pzg9Iu15hVc2aWF7ckHHfr-1c';

const LIVE_CACHE_KEY = 'airank-live-v3';
const LIVE_CACHE_TTL = 4 * 60 * 60 * 1000; // 4ì‹œê°„

async function apiFetchYouTube(query) {
  if (!YOUTUBE_API_KEY) return 0;
  const r = await fetch(
    `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=video&order=relevance&maxResults=1&key=${YOUTUBE_API_KEY}`
  );
  if (!r.ok) return 0;
  const d = await r.json();
  if (d.error) return 0;
  return d.pageInfo?.totalResults || 0;
}

async function apiFetchReddit(query) {
  const r = await fetch(
    `https://www.reddit.com/search.json?q=${encodeURIComponent(query)}&sort=top&t=month&limit=25&raw_json=1`,
    { headers: { Accept: 'application/json' } }
  );
  const d = await r.json();
  const posts = d?.data?.children || [];
  const upvotes = posts.reduce((s, p) => s + (p.data.score || 0), 0);
  return { count: posts.length, upvotes };
}

async function apiFetchGitHub(query) {
  const r = await fetch(
    `https://api.github.com/search/repositories?q=${encodeURIComponent(query)}&sort=stars&per_page=1`,
    { headers: { Accept: 'application/vnd.github.v3+json' } }
  );
  if (r.status === 403) return 0;
  const d = await r.json();
  return d.total_count || 0;
}

function logScale(val, refMax) {
  if (val <= 0) return 0;
  return Math.min(100, Math.round((Math.log1p(val) / Math.log1p(refMax)) * 100));
}

function setLiveBadge(loading) {
  const badge = document.getElementById('liveBadge');
  if (!badge) return;
  badge.textContent = loading ? 'â³ ì—…ë°ì´íŠ¸ ì¤‘â€¦' : 'ğŸŸ¢ LIVE';
  badge.style.background = loading ? 'rgba(251,191,36,0.15)' : '';
  badge.style.color = loading ? '#fbbf24' : '';
}

async function fetchLiveData() {
  try {
    const raw = sessionStorage.getItem(LIVE_CACHE_KEY);
    if (raw) {
      const { ts, payload } = JSON.parse(raw);
      if (Date.now() - ts < LIVE_CACHE_TTL) { applyLivePayload(payload); return; }
    }
  } catch(e) {}

  setLiveBadge(true);

  const ids = Object.keys(TOOL_QUERIES).map(Number);
  const raw = {};

  for (let i = 0; i < ids.length; i += 3) {
    const batch = ids.slice(i, i + 3);
    await Promise.all(batch.map(async id => {
      const q = TOOL_QUERIES[id];
      try {
        const [ytTotal, reddit, github] = await Promise.all([
          apiFetchYouTube(q),
          apiFetchReddit(q),
          apiFetchGitHub(q),
        ]);
        raw[id] = { ytTotal, redditUp: reddit.upvotes, github };
      } catch(e) {
        console.warn(`[AIrank] ${q} fetch failed:`, e.message);
        raw[id] = null;
      }
    }));
    if (i + 3 < ids.length) await new Promise(r => setTimeout(r, 400));
  }

  // ì •ê·œí™” ê¸°ì¤€ê°’
  const REF = { yt: 2000000, redditUp: 150000, github: 800000 };

  const payload = {};
  ids.forEach(id => {
    const d = raw[id];
    if (!d) return;
    const tool        = TOOLS.find(t => t.id === id);
    const xScore      = tool ? tool.sns.x : 50;
    // YouTube API í‚¤ ì—†ìœ¼ë©´ ê¸°ì¡´ í•˜ë“œì½”ë”© ê°’ ìœ ì§€
    const ytScore     = YOUTUBE_API_KEY
      ? logScale(d.ytTotal,  REF.yt)
      : (tool ? tool.sns.youtube : 50);
    const redditScore = logScale(d.redditUp,  REF.redditUp);
    const githubScore = logScale(d.github,    REF.github);
    // ê°€ì¤‘ í•©ì‚°: Reddit 30% + YouTube 30% + GitHub 25% + X 15%
    const composite = Math.round(redditScore * 0.30 + ytScore * 0.30 + githubScore * 0.25 + xScore * 0.15);
    payload[id] = { youtube: ytScore, reddit: redditScore, github: githubScore, score: composite };
  });

  try {
    sessionStorage.setItem(LIVE_CACHE_KEY, JSON.stringify({ ts: Date.now(), payload }));
  } catch(e) {}

  applyLivePayload(payload);
  setLiveBadge(false);
}

function applyLivePayload(payload) {
  TOOLS.forEach(tool => {
    const d = payload[tool.id];
    if (!d) return;
    const prev          = tool.score;
    tool.sns.youtube    = d.youtube;
    tool.sns.reddit     = d.reddit;
    tool.sns.github     = d.github;
    tool.score          = d.score;
    tool.change         = parseFloat((d.score - prev).toFixed(1));
    tool.isLive         = true;
  });
  render();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
render();
fetchLiveData();
</script>
</body>
</html>
